!function(e,n){"function"==typeof define&&define.amd?define(["exports"],n):"undefined"!=typeof exports?n(exports):(n(n={}),e.modMenu=n)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.menu=void 0;var r=MyAMS.$;var n=!1,t={init:function(){n||(n=!0,r.fn.extend({contextMenu:function(i){function a(e,n){var t=r(window)[n](),o=r(i.menuSelector)[n](),n=e;return t<e+o&&o<e&&(n-=o),n}return this.each(function(e,n){var t=r(n),o=r(i.menuSelector);r("a",o).each(function(e,n){r(n).data("ams-context-menu",!0)}),t.on("contextmenu",function(e){if(!e.ctrlKey)return o.data("contextmenu-event-source",t).dropdown("show").css({position:"fixed",left:a(e.clientX,"width")-10,top:a(e.clientY,"height")-10}).off("click").on("click",function(e){e.stopPropagation(),e.preventDefault(),o.dropdown("hide"),function(t){"A"!==t.get(0).tagName&&(t=t.parents("a").first());var o,e=t.data();"modal"===e.toggle?MyAMS.require("modal").then(function(){MyAMS.modal.open(t)}):!(o=t.attr("href")||e.amsUrl)||o.startsWith("javascript:")||t.attr("target")||("function"==typeof(e=MyAMS.core.getFunctionByName(o))&&(o=e(t)),void 0!==o&&("function"==typeof o?o(t):MyAMS.require("form","skin").then(function(){o=o.replace(/%23/,"#");var n=t.data("ams-target");n?MyAMS.form.confirmChangedForm(n).then(function(e){"success"===e&&MyAMS.skin.loadURL(o,n,t.data("ams-link-options"),t.data("ams-link-callback"))}):MyAMS.form.confirmChangedForm().then(function(e){"success"===e&&(o.startsWith("#")?o!==location.hash&&(MyAMS.dom.root.hasClass("mobile-view-activated")?(MyAMS.dom.root.removeClass("hidden-menu"),setTimeout(function(){window.location.hash=o},50)):window.location.hash=o):window.location=o)})})))}(r(e.target))}),!1}),r(document).click(function(){o.dropdown("hide")})})}}),r(document).on("show.bs.dropdown",".btn-group",function(e){var n=r(e.currentTarget),t=n.children(".dropdown-menu"),o=n.get(0).getBoundingClientRect(),i=o.top,e=o.height,o=t.outerHeight();o<i&&r(window).height()-i<e+o&&n.addClass("dropup"),r("input, select, textarea",t).first().focus()}).on("hidden.bs.dropdown",".btn-group",function(e){r(e.currentTarget).removeClass("dropup")}),r(document).on("hide.bs.dropdown",function(e){if(e.clickEvent&&!1===r(e.clickEvent.target).parents(".dropdown-menu").data("ams-click-dismiss"))return e.preventDefault(),!1}))}};e.menu=t,window.MyAMS&&(MyAMS.env.bundle?MyAMS.config.modules.push("menu"):(MyAMS.menu=t,console.debug("MyAMS: menu module loaded...")))});