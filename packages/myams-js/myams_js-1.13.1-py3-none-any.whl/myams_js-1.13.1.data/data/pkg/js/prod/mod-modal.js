!function(e,a){if("function"==typeof define&&define.amd)define(["exports"],a);else if("undefined"!=typeof exports)a(exports);else{var t={exports:{}};a(t.exports),e.modModal=t.exports}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,(function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dynamicModalHiddenEventHandler=c,e.dynamicModalShowEventHandler=d,e.dynamicModalShownEventHandler=s,e.modal=void 0,e.modalDismissEventHandler=l,e.modalHiddenEventHandler=r,e.modalShownEventHandler=n,e.modalToggleEventHandler=o;const a=MyAMS.$;let t=!1;function o(e){return new Promise(((t,o)=>{const n=a(e.currentTarget),d=n.data("ams-disabled-handlers");n.attr("disabled")||n.hasClass("disabled")||!0===d||"click"===d||"all"===d?t(!1):!0!==n.data("ams-context-menu")?(!0===n.data("ams-stop-propagation")&&e.stopPropagation(),e.preventDefault(),n.tooltip("hide"),MyAMS.modal.open(n).then((()=>{t(!0)}),o)):t(!1)}))}function n(e){const t=a(e.target),o=1100+100*a(".modal:visible").length;t.css("z-index",o),setTimeout((()=>{a(".modal-backdrop").not(".modal-stack").first().css("z-index",o-10).addClass("modal-stack")}),0),a(t).off("click",'[data-dismiss="modal"]').on("click",'[data-dismiss="modal"]',(e=>{const t=a(e.currentTarget).data("ams-dismiss-handler")||l;return MyAMS.core.executeFunctionByName(t,document,e)}))}function d(e){const t=a(e.target);return MyAMS.core.executeFunctionByName(t.data("ams-init-content")||MyAMS.config.initContent,document,t)}function s(e){return new Promise(((t,o)=>{MyAMS.require("form").then((()=>{const o=a(e.target);MyAMS.form.setFocus(o),t(o)}),o)}))}function l(e){return new Promise(((t,o)=>{const n=a(e.currentTarget).parents(".modal").first();n.data("modal-result",a(e.currentTarget).data("modal-dismiss-value")),MyAMS.form?MyAMS.form.confirmChangedForm(n).then((e=>{"success"===e&&n.modal("hide")})).then(t,o):(n.modal("hide"),t())}))}function r(){a(".modal:visible").length>0&&(a.fn.modal.Constructor.prototype._checkScrollbar(),a.fn.modal.Constructor.prototype._setScrollbar(),a("body").addClass("modal-open"))}function c(e){const t=a(e.target);MyAMS.core.executeFunctionByName(t.data("ams-clear-content")||MyAMS.config.clearContent,document,t).then((()=>{!0===t.data("dynamic")&&t.remove()}))}const i={init:()=>{t||(t=!0,MyAMS.config.ajaxNav&&a(document).off("click",'[data-toggle="modal"]').on("click",'[data-toggle="modal"]',(e=>{e.stopPropagation();const t=a(e.currentTarget).data("ams-modal-handler")||o;MyAMS.core.executeFunctionByName(t,document,e)})),a(document).on("shown.bs.modal",".modal",(e=>{const t=a(e.currentTarget).data("ams-shown-handler")||n;MyAMS.core.executeFunctionByName(t,document,e)})),a(document).on("hidden.bs.modal",".modal",(e=>{const t=a(e.currentTarget).data("ams-hidden-handler")||r;MyAMS.core.executeFunctionByName(t,document,e)})))},open:(e,t)=>new Promise(((o,n)=>{let l={},r=e;"string"!=typeof e&&(l=e.data(),r=e.attr("href")||l.amsUrl);const i=MyAMS.core.getFunctionByName(r);"function"==typeof i&&(r=i(e)),r||n("No provided URL!"),r.startsWith("#")?(a(r).modal("show"),o()):a.ajax({type:"get",url:r,cache:void 0!==l.amsAllowCache&&l.amsAllowCache,data:t}).then(((t,n,i)=>{let m=null;MyAMS.require("ajax").then((()=>{const t=MyAMS.ajax.getResponse(i),o=t.contentType,n=t.data;let u,M,y,f,h;switch(o){case"json":MyAMS.ajax.handleJSON(n,a(a(e).data("ams-json-target")||"#content"));break;case"script":case"xml":break;default:u=a(n),M=a(".modal-dialog",u.wrap("<div></div>").parent()),y=M.data()||{},f={backdrop:void 0===y.backdrop?"static":y.backdrop,keyboard:void 0===y.keyboard||y.keyboard},h=a.extend({},f,y.amsOptions),h=MyAMS.core.executeFunctionByName(y.amsInit,M,h)||h,m=a("<div>").addClass("modal fade").attr("tabIndex","-1").data("dynamic",!0).append(u).on("show.bs.modal",d).on("shown.bs.modal",s).on("hidden.bs.modal",c).modal(h),MyAMS.stats&&!1!==l.amsLogEvent&&!1!==y.amsLogEvent&&MyAMS.stats.logPageview(r)}})).then((()=>{o(m)}))}))})),close:e=>{"string"==typeof e?e=a(e):void 0===e&&(e=a(".modal-dialog:last"));const t=e.objectOrParentWithClass("modal");t.length>0&&t.modal("hide")}};e.modal=i,MyAMS.env.bundle?MyAMS.config.modules.push("modal"):(MyAMS.modal=i,console.debug("MyAMS: modal module loaded..."))}));