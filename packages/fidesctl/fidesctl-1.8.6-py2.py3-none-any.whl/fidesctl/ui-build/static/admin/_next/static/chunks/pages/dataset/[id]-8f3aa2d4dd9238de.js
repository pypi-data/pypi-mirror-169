(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[623],{58144:function(e,t,n){"use strict";var r=n(23296),i=n(1396),o=n(43894),a=n(85893);t.Z=function(e){var t=e.isOpen,n=e.onClose,s=e.onConfirm,c=e.title,l=e.message;return(0,a.jsxs)(r.u_,{isOpen:t,onClose:n,size:"lg",children:[(0,a.jsx)(r.ZA,{}),(0,a.jsxs)(r.hz,{textAlign:"center",p:2,"data-testid":"confirmation-modal",children:[(0,a.jsx)(r.xB,{fontWeight:"medium",children:c}),(0,a.jsx)(r.fe,{children:l}),(0,a.jsx)(r.mz,{children:(0,a.jsxs)(i.MI,{columns:2,width:"100%",children:[(0,a.jsx)(o.zx,{variant:"outline",mr:3,onClick:n,"data-testid":"cancel-btn",children:"Cancel"}),(0,a.jsx)(o.zx,{colorScheme:"primary",onClick:s,"data-testid":"continue-btn",children:"Continue"})]})})]})]})}},10846:function(e,t,n){"use strict";n.d(t,{t:function(){return d},V:function(){return f}});var r=n(59499),i=n(1396),o=n(85893);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=function(e){var t=e.message;return(0,o.jsxs)(i.xv,{"data-testid":"toast-success-msg",children:[(0,o.jsx)("strong",{children:"Success:"})," ",t]})},l=function(e){var t=e.message;return(0,o.jsxs)(i.xv,{"data-testid":"toast-error-msg",children:[(0,o.jsx)("strong",{children:"Error:"})," ",t]})},u={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},d=function(e){var t=(0,o.jsx)(c,{message:e});return s(s({},u),{description:t})},f=function(e){var t=(0,o.jsx)(l,{message:e});return s(s({},u),{description:t,status:"error"})}},77046:function(e,t,n){"use strict";var r=n(59499),i=n(4730),o=n(59252),a=n(85893),s=["name","onClose"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.name,n=e.onClose,r=(0,i.Z)(e,s),c=l({backgroundColor:"primary.400",color:"white","data-testid":"taxonomy-entity-".concat(t),width:"fit-content",size:"sm"},r);return n?(0,a.jsxs)(o.Vp,l(l({display:"flex",justifyContent:"space-between"},c),{},{children:[(0,a.jsx)(o.Sn,{children:t}),(0,a.jsx)(o.SD,{onClick:n,color:"white"})]})):(0,a.jsx)(o.Vp,l(l({},c),{},{children:t}))}},45009:function(e,t,n){"use strict";n.d(t,{C:function(){return r},P:function(){return i}});var r=function e(t,n){var r;if(null==n&&t.every((function(e){return void 0===e.parent_key})))r=t;else{var i=null!==n&&void 0!==n?n:null;r=t.filter((function(e){return e.parent_key===i}))}return r.map((function(n){var r,i=n.fides_key;return{value:n.fides_key,label:""===n.name||null==n.name?n.fides_key:n.name,description:n.description,children:e(t,i),is_default:null!==(r=n.is_default)&&void 0!==r&&r}}))},i=function(e){var t=e.split(".");return 1===t.length?"":t.slice(0,t.length-1).join(".")}},914:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Xe}});var r=n(1396),i=n(77336),o=n(41664),a=n(11163),s=n(13275),c=n(30437),l=n(38351),u=n(23597),d=n(67294),f=n(2185),p=n(58183),h=n(10846),j=n(75568),y=n(43894),x=n(12156),b=n(1412),m=n(85893),v=function(e){var t=e.allColumns,n=e.selectedColumns,i=e.onChange,o=(0,d.useMemo)((function(){var e=new Map;return t.forEach((function(t){return e.set(t.name,!0)})),e}),[t]),a=function(){o.forEach((function(e,t){return o.set(t,!1)})),i([])},s=function(e){var n,r=null!==(n=o.get(e.name))&&void 0!==n&&n;o.set(e.name,!r),i(t.filter((function(e){return o.get(e.name)})))};return(0,m.jsx)(j.v2,{children:function(e){var i=e.onClose;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(j.j2,{as:y.zx,rightIcon:(0,m.jsx)(b.mC,{}),variant:"outline",fontWeight:"normal","data-testid":"column-dropdown",children:"Columns"}),(0,m.jsx)(j.qy,{children:(0,m.jsxs)(r.xu,{px:2,children:[(0,m.jsxs)(r.xu,{display:"flex",justifyContent:"space-between",mb:2,children:[(0,m.jsx)(y.zx,{variant:"outline",size:"xs",onClick:a,"data-testid":"column-clear-btn",children:"Clear"}),(0,m.jsx)(y.zx,{size:"xs",colorScheme:"primary",onClick:i,"data-testid":"column-done-btn",children:"Done"})]}),(0,m.jsx)(x.cO,{colorScheme:"complimentary",children:(0,m.jsx)(r.Kq,{children:t.map((function(e){var t=n.filter((function(t){return t.name===e.name})).length>0;return(0,m.jsx)(x.XZ,{id:e.name,_hover:{bg:"gray.100"},isChecked:t,onChange:function(){return s(e)},"data-testid":"checkbox-".concat(e.name),children:e.name},e.name)}))})})]})})]})}})},g=n(29112),O=n(35922),C=n(59499),w=n(59252),k=[{key:"aggregated",label:"Aggregated",styles:{backgroundColor:"green.500",color:"white"}},{key:"anonymized",label:"Anonymized",styles:{backgroundColor:"yellow.400",color:"gray.700"}},{key:"aggregated.anonymized",label:"Unlinked Pseudonymized",styles:{backgroundColor:"orange.300",color:"gray.700"}},{key:"aggregated.anonymized.unlinked_pseudonymized",label:"Pseudonymized",styles:{backgroundColor:"orange.500",color:"white"}},{key:"aggregated.anonymized.unlinked_pseudonymized.pseudonymized.identified",label:"Identified",styles:{backgroundColor:"red.600",color:"white"}}],P={tooltip:"A UI-friendly label for the Dataset."},D={tooltip:"A human-readable description of the Dataset."},S={tooltip:"An optional string to describe the retention policy for a dataset. This field can also be applied more granularly at either the Collection or field level of a Dataset"},_={tooltip:"Arrays of Data Qualifier resources, identified by fides_key, that apply to all collections in the Dataset."},z={tooltip:"Arrays of Data Category resources, identified by fides_key, that apply to all collections in the Dataset."},E={tooltip:"An optional array to identify any third countries where data is transited to. For consistency purposes, these fields are required to follow the Alpha-3 code set in ISO 3166-1"},Z={tooltip:"A human-readable description of the collection."},A={tooltip:"Arrays of Data Qualifier resources, identified by fides_key, that apply to all fields in the collection."},q={tooltip:"Arrays of Data Category resources, identified by fides_key, that apply to all fields in the collection."},N={tooltip:"A human-readable description of the field."},T={tooltip:"A Data Qualifier that applies to this field. Note that this field holds a single value, therefore, the property name is singular."},I={tooltip:"Arrays of Data Category resources, identified by fides_key, that apply to this field."};function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W=function(e){var t=e.dataQualifierName,n=k.filter((function(e){return e.key===t}));if(0===n.length)return(0,m.jsx)(w.Vp,{children:t});var r=n[0],i=r.styles,o=r.label,a=r.key;return(0,m.jsx)(w.Vp,F(F({"data-testid":"identifiability-tag-".concat(a)},i),{},{children:o}))},V=n(77046),R=n(16835),K=n(82175),Q=n(96016),X=n(64598),G=n(27812),L=function(e){var t=e.split("."),n=[];return t.forEach((function(e){var t=n.length>0?n[n.length-1]:null;t?n.push("".concat(t,".").concat(e)):n.push(e)})),n},U=function e(t,n,r){var i=null!==r&&void 0!==r?r:[];return t.forEach((function(t){t.children&&e(t.children,n,i),t.value.startsWith(n)&&i.push(t)})),i},Y=function(e){var t=e.node,n=e.isChecked,i=e.onChecked,o=e.isExpanded,a=e.onExpanded,s=e.isIndeterminate,c=e.isDisabled,l=e.children,u=t.value,d=t.label,f=!!t.children&&t.children.length>0;return(0,m.jsxs)(r.xu,{children:[(0,m.jsxs)(r.xu,{display:"flex",justifyContent:"space-between",_hover:{backgroundColor:"gray.100",cursor:"pointer"},onClick:function(){return a(t)},children:[(0,m.jsx)(x.XZ,{colorScheme:"complimentary",value:u,isChecked:!s&&n,isIndeterminate:s,isDisabled:c,onChange:function(){return i(t)},mx:2,"data-testid":"checkbox-".concat(d),children:d}),f?(0,m.jsx)(y.hU,{"data-testid":"expand-".concat(d),"aria-label":o?"collapse":"expand",icon:o?(0,m.jsx)(b.O1,{}):(0,m.jsx)(b.mC,{}),variant:"ghost",onClick:function(){return a(t)},size:"sm"}):null]}),l&&(0,m.jsx)(r.xu,{ml:5,children:l})]})},$=function(e){var t=e.nodes,n=e.selected,i=e.onSelected,o=(0,d.useState)([]),a=o[0],s=o[1],c=(0,d.useState)([]),l=c[0],u=c[1];(0,d.useEffect)((function(){var e=n.map((function(e){return L(e)})).reduce((function(e,t){return e.concat(t)}),[]),r=n.map((function(e){return U(t,e)})).reduce((function(e,t){return e.concat(t)}),[]).map((function(e){return e.value})),i=Array.from(new Set([].concat((0,G.Z)(e),(0,G.Z)(r))));u(i),s(i)}),[n,t]);var f=function(e){var r=[],o=[];if(a.indexOf(e.value)>=0)r=a.filter((function(t){return!t.startsWith(e.value)})),o=n.filter((function(t){return!t.startsWith(e.value)}));else{var c=U(t,e.value).map((function(e){return e.value}));r=[].concat((0,G.Z)(a),(0,G.Z)(c)),o=[].concat((0,G.Z)(n),[e.value])}s(r),i(o)},p=function(e){l.indexOf(e.value)>=0?u(l.filter((function(t){return!t.startsWith(e.value)}))):u([].concat((0,G.Z)(l),[e.value]))},h=function e(r){if(r.children){var i=a.indexOf(r.value)>=0,o=l.indexOf(r.value)>=0,s=U(t,r.value),c=i&&r.children.length>0&&a.filter((function(e){return e.startsWith(r.value)})).length!==s.length,u=function(e,t){var n=L(t).filter((function(e){return e!==t}));return e.filter((function(e){return n.includes(e)})).length>0}(n,r.value);return(0,m.jsx)(Y,{node:r,isChecked:i,onChecked:f,isExpanded:o,onExpanded:p,isDisabled:u,isIndeterminate:c,children:o&&r.children.map((function(t){return(0,m.jsx)(d.Fragment,{children:e(t)},t.value)}))})}return null};return(0,m.jsx)(r.xu,{children:t.map((function(e){return(0,m.jsx)(r.xu,{children:h(e)},e.value)}))})},B=n(13230),J=n(45009),H=function(e){var t=e.dataCategories,n=e.checked,i=e.onChecked,o=(0,d.useMemo)((function(){return(0,J.C)(t)}),[t]);return(0,m.jsxs)(j.v2,{closeOnSelect:!0,children:[(0,m.jsx)(j.j2,{as:y.zx,variant:"outline",fontWeight:"normal",size:"sm",borderRadius:"sm",textAlign:"left",_hover:{backgroundColor:"transparent"},_active:{backgroundColor:"transparent"},rightIcon:(0,m.jsx)(b.mC,{}),width:"100%","data-testid":"data-category-dropdown",children:"Select data categories"}),(0,m.jsx)(j.qy,{children:(0,m.jsxs)(r.xu,{maxHeight:"50vh",minWidth:"300px",overflowY:"scroll",children:[(0,m.jsxs)(r.xu,{position:"sticky",top:0,zIndex:1,backgroundColor:"white",pt:1,children:[(0,m.jsx)(j.__,{children:(0,m.jsxs)(r.xu,{display:"flex",justifyContent:"space-between",px:2,mb:2,children:[(0,m.jsx)(j.sN,{as:y.zx,variant:"outline",size:"xs",onClick:function(){return i([])},mr:2,width:"auto",closeOnSelect:!1,"data-testid":"data-category-clear-btn",children:"Clear"}),(0,m.jsx)(r.xv,{mr:2,children:"Data Categories"}),(0,m.jsx)(j.sN,{as:y.zx,size:"xs",colorScheme:"primary",color:"white",_hover:{backgroundColor:"primary.600"},width:"auto","data-testid":"data-category-done-btn",children:"Done"})]})}),(0,m.jsx)(j.R,{})]}),(0,m.jsx)(r.xu,{px:2,children:(0,m.jsx)($,{nodes:o,selected:n,onSelected:i})})]})})]})},ee=function(e){var t=e.dataCategories,n=e.checked,i=e.onChecked,o=e.tooltip,a=n.slice().sort((function(e,t){return e.localeCompare(t)}));return(0,m.jsxs)(r.rj,{templateColumns:"1fr 3fr",children:[(0,m.jsx)(X.lX,{children:"Data Categories"}),(0,m.jsxs)(r.Kq,{children:[(0,m.jsxs)(r.xu,{display:"flex",alignItems:"center",children:[(0,m.jsx)(r.xu,{mr:"2",width:"100%",children:(0,m.jsx)(H,{dataCategories:t,checked:n,onChecked:i})}),(0,m.jsx)(B.Z,{label:o})]}),(0,m.jsx)(r.Kq,{"data-testid":"selected-categories",children:a.map((function(e){return(0,m.jsx)(V.Z,{name:e,onClose:function(){var t;t=e,i(n.filter((function(e){return e!==t})))}},e)}))})]})]})};function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re=k.map((function(e){return{value:e.key,label:e.label}})),ie=function(e){var t,n,i=e.values,o=e.onClose,a=e.onSubmit,s=e.dataType,c={description:null!==(t=i.description)&&void 0!==t?t:"",data_qualifier:i.data_qualifier,data_categories:i.data_categories},l=(0,f.v9)(p.qb),u=(0,d.useState)(null!==(n=c.data_categories)&&void 0!==n?n:[]),h=u[0],j=u[1],x="collection"===s?Z.tooltip:N.tooltip,b="collection"===s?A.tooltip:T.tooltip,v="collection"===s?q.tooltip:I.tooltip;return(0,m.jsx)(K.J9,{initialValues:c,onSubmit:function(e){var t=ne(ne({},e),{data_categories:h});a(t)},children:(0,m.jsx)(K.l0,{children:(0,m.jsxs)(r.xu,{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"75vh",children:[(0,m.jsxs)(r.Kq,{children:[(0,m.jsx)(Q.j0,{name:"description",label:"Description",tooltip:x,"data-testid":"description-input"}),(0,m.jsx)(Q.AP,{name:"data_qualifier",label:"Identifiability",options:re,tooltip:b,isSearchable:!1,"data-testid":"identifiability-input"}),(0,m.jsx)(ee,{dataCategories:l,checked:h,onChecked:j,tooltip:v})]}),(0,m.jsxs)(r.xu,{children:[(0,m.jsx)(y.zx,{onClick:o,mr:2,size:"sm",variant:"outline",children:"Cancel"}),(0,m.jsx)(y.zx,{type:"submit",colorScheme:"primary",size:"sm","data-testid":"save-btn",children:"Save"})]})]})})})},oe=n(20650),ae=n(23296),se=n(58144),ce=function(e){var t=e.header,n=e.description,i=e.isOpen,o=e.onClose,a=e.onDelete,s=e.deleteTitle,c=e.deleteMessage,l=e.children,u=(0,oe.qY)(),d=u.isOpen,f=u.onOpen,p=u.onClose;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(ae.dy,{placement:"right",isOpen:i,onClose:o,size:"lg",children:[(0,m.jsx)(ae.P1,{}),(0,m.jsx)(ae.sc,{"data-testid":"edit-drawer-content",children:(0,m.jsxs)(r.xu,{py:2,children:[(0,m.jsx)(r.xu,{display:"flex",justifyContent:"flex-end",mr:2,children:(0,m.jsx)(y.zx,{variant:"ghost",onClick:o,children:(0,m.jsx)(b.LG,{})})}),(0,m.jsxs)(ae.OX,{py:2,display:"flex",alignItems:"center",children:[(0,m.jsx)(r.xv,{mr:"2",children:t}),(0,m.jsx)(y.hU,{"aria-label":"delete",icon:(0,m.jsx)(b.lr,{}),size:"xs",onClick:f,"data-testid":"delete-btn"})]}),(0,m.jsxs)(ae.Ng,{children:[(0,m.jsx)(r.xv,{fontSize:"sm",mb:4,children:n}),l]})]})})]}),(0,m.jsx)(se.Z,{isOpen:d,onClose:p,onConfirm:a,title:s,message:c})]})};function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de=function(e,t,n){var r=e.collections.map((function(e,r){return r===n?t:e}));return ue(ue({},e),{collections:r})},fe=function(e,t,n,r){var i=function(e,t,n){var r=e.fields.map((function(e,r){return r===n?t:e}));return ue(ue({},e),{fields:r})}(e.collections[n],t,r);return de(e,i,n)},pe=function(e,t){var n=e.collections.filter((function(e,n){return n!==t}));return ue(ue({},e),{collections:n})};function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye=function(e){var t=e.field,n=e.isOpen,i=e.onClose,o=(0,f.v9)(g.n0),a=(0,f.v9)(g.gR),s=(0,f.v9)(g.mZ),c=(0,g.TG)(),l=(0,R.Z)(c,1)[0];return(0,m.jsx)(ce,{isOpen:n,onClose:i,header:"Field Name: ".concat(t.name),description:"Fields are an array of objects that describe the collection's fields. Provide additional context to this field by filling out the fields below.",onDelete:function(){if(o&&null!=a&&null!=s){var e=function(e,t,n){var r=e.collections[t],i=r.fields.filter((function(e,t){return t!==n})),o=ue(ue({},r),{fields:i});return de(e,o,t)}(o,a,s);l(e),i()}},deleteTitle:"Delete Field",deleteMessage:(0,m.jsxs)(r.xv,{children:["You are about to permanently delete the field named"," ",(0,m.jsx)(r.xv,{color:"complimentary.500",as:"span",fontWeight:"bold",children:t.name})," ","from this dataset. Are you sure you would like to continue?"]}),children:(0,m.jsx)(ie,{values:t,onClose:i,onSubmit:function(e){if(o&&null!=a&&null!=s){var n=je(je({},t),e),r=fe(o,n,a,s);l(r),i()}},dataType:"field"})})},xe=function(e){var t=e.fields,n=e.columns,i=(0,f.I0)(),o=(0,d.useState)(!1),a=o[0],s=o[1],c=(0,f.v9)(g.mZ),l=function(e){i((0,g.EQ)(e)),s(!0)},u=null!=c?t[c]:null;return(0,m.jsxs)(r.xu,{children:[(0,m.jsxs)(O.iA,{size:"sm","data-testid":"dataset-fields-table",children:[(0,m.jsx)(O.hr,{children:(0,m.jsx)(O.Tr,{children:n.map((function(e){return(0,m.jsx)(O.Th,{pl:0,"data-testid":"column-".concat(e.name),children:e.name},e.name)}))})}),(0,m.jsx)(O.p3,{children:t.map((function(e,t){return(0,m.jsx)(O.Tr,{_hover:{bg:"gray.50"},cursor:"pointer",onClick:function(){return l(t)},tabIndex:0,onKeyPress:function(e){"Enter"===e.key&&l(t)},"data-testid":"field-row-".concat(e.name),children:n.map((function(t){return(0,m.jsx)(O.Td,{pl:0,children:function(){var n,i;return"data_qualifier"===t.attribute?(0,m.jsx)(W,{dataQualifierName:null!==(n=e[t.attribute])&&void 0!==n?n:""}):"data_categories"===t.attribute?null===(i=e[t.attribute])||void 0===i?void 0:i.map((function(t){return(0,m.jsx)(r.xu,{mr:2,mb:2,children:(0,m.jsx)(V.Z,{name:t})},"".concat(e.name,"-").concat(t))})):e[t.attribute]}()},"".concat(t.name,"-").concat(e.name))}))},e.name)}))})]}),u?(0,m.jsx)(ye,{isOpen:a,onClose:function(){s(!1),i((0,g.EQ)(null))},field:u}):null]})},be=n(50029),me=n(87794),ve=n.n(me);function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ce=function(e){var t=e.collection,n=e.isOpen,i=e.onClose,o=(0,f.v9)(g.n0),a=(0,f.v9)(g.gR),s=(0,g.TG)(),l=(0,R.Z)(s,1)[0],u=(0,c.pm)(),d=function(){var e=(0,be.Z)(ve().mark((function e(n){var r,s;return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o||null==a){e.next=13;break}return r=Oe(Oe({},t),n),s=de(o,r,a),e.prev=3,e.next=6,l(s);case 6:u((0,h.t)("Successfully modified collection")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),u((0,h.V)(e.t0));case 12:i();case 13:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,be.Z)(ve().mark((function e(){var t,n;return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o||null==a){e.next=14;break}return t=pe(o,a),e.prev=2,e.next=5,l(t);case 5:u((0,h.t)("Successfully deleted collection")),n=o.collections.length>0?0:null,(0,g.Fy)(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),u((0,h.V)(e.t0));case 13:i();case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return(0,m.jsx)(ce,{isOpen:n,onClose:i,description:"Collections are an array of objects that describe the Dataset's collections. Provide additional context to this collection by filling out the fields below.",header:"Collection Name: ".concat(t.name),onDelete:p,deleteTitle:"Delete Collection",deleteMessage:(0,m.jsxs)(r.xv,{children:["You are about to permanently delete the collection named"," ",(0,m.jsx)(r.xv,{color:"complimentary.500",as:"span",fontWeight:"bold",children:t.name})," ","from this dataset. Are you sure you would like to continue?"]}),children:(0,m.jsx)(ie,{values:t,onClose:i,onSubmit:d,dataType:"collection"})})},we=n(65698),ke=n(18975),Pe=n(41086);ke.registerLocale(Pe);var De=ke.getNames("en",{select:"official"}),Se=Object.keys(De).map((function(e){return{value:ke.alpha2ToAlpha3(e),label:De[e]}}));function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ee=k.map((function(e){return{label:e.label,value:e.key}})),Ze=function(e){var t,n,i,o,a,s=e.values,c=e.onClose,l=e.onSubmit,u={name:null!==(t=s.name)&&void 0!==t?t:"",description:null!==(n=s.description)&&void 0!==n?n:"",retention:null!==(i=s.retention)&&void 0!==i?i:"",data_qualifier:s.data_qualifier,third_country_transfers:null!==(o=s.third_country_transfers)&&void 0!==o?o:[],data_categories:s.data_categories},h=(0,f.v9)(p.qb),j=(0,d.useState)(null!==(a=u.data_categories)&&void 0!==a?a:[]),x=j[0],b=j[1];return(0,m.jsx)(K.J9,{initialValues:u,onSubmit:function(e){var t=ze(ze({},e),{data_categories:x});l(t)},children:(0,m.jsx)(K.l0,{children:(0,m.jsxs)(r.xu,{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"75vh",children:[(0,m.jsxs)(r.Kq,{spacing:"3",children:[(0,m.jsx)(Q.j0,{name:"name",label:"Name",tooltip:P.tooltip,"data-testid":"name-input"}),(0,m.jsx)(Q.j0,{name:"description",label:"Description",tooltip:D.tooltip,"data-testid":"description-input"}),(0,m.jsx)(Q.j0,{name:"retention",label:"Retention period",tooltip:S.tooltip,"data-testid":"retention-input"}),(0,m.jsx)(Q.AP,{name:"data_qualifier",label:"Identifiability",options:Ee,tooltip:_.tooltip,"data-testid":"identifiability-input"}),(0,m.jsx)(Q.Fs,{name:"third_country_transfers",label:"Geographic location",tooltip:E.tooltip,isSearchable:!0,options:Se,"data-testid":"geography-input"}),(0,m.jsx)(ee,{dataCategories:h,checked:x,onChecked:b,tooltip:z.tooltip})]}),(0,m.jsxs)(r.xu,{children:[(0,m.jsx)(y.zx,{onClick:c,mr:2,size:"sm",variant:"outline",children:"Cancel"}),(0,m.jsx)(y.zx,{type:"submit",colorScheme:"primary",size:"sm","data-testid":"save-btn",children:"Save"})]})]})})})};function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ne=function(e){var t=e.dataset,n=e.isOpen,i=e.onClose,o=(0,g.TG)(),s=(0,R.Z)(o,1)[0],l=(0,g.QY)(),u=(0,R.Z)(l,1)[0],d=(0,a.useRouter)(),f=(0,c.pm)(),p=function(){var e=(0,be.Z)(ve().mark((function e(n){var r,o;return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qe(qe({},t),n),e.prev=1,e.next=4,s(r);case 4:o=e.sent,(0,we.D4)(o)?f((0,h.V)((0,we.e$)(o.error))):f((0,h.t)("Successfully modified dataset")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),f((0,h.V)(e.t0));case 11:i();case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=(0,be.Z)(ve().mark((function e(){var n,r;return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fides_key,e.next=3,u(n);case 3:r=e.sent,(0,we.D4)(r)?f((0,h.V)((0,we.e$)(r.error))):f((0,h.t)("Successfully deleted dataset")),(0,g._U)(null),d.push("/dataset"),i();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,m.jsx)(ce,{isOpen:n,onClose:i,description:"A Dataset takes a database schema (tables and columns) and adds Fides privacy categorizations. Provide additional context to this dataset by filling out the fields below.",header:"Dataset Name: ".concat(t.name),onDelete:j,deleteMessage:(0,m.jsxs)(r.xv,{children:["You are about to permanently delete the dataset named"," ",(0,m.jsx)(r.xv,{color:"complimentary.500",as:"span",fontWeight:"bold",children:t.name}),". Are you sure you would like to continue?"]}),deleteTitle:"Delete Dataset",children:(0,m.jsx)(Ze,{values:t,onClose:i,onSubmit:p})})},Te=n(4730),Ie=n(81555),Me=["children","isDisabled","onClick"];function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ve=function(e){var t=e.children,n=e.isDisabled,r=e.onClick,i=(0,Te.Z)(e,Me);return(0,m.jsx)(j.sN,We(We({isDisabled:n,_hover:{backgroundColor:"gray.100"},fontSize:"sm",onClick:r},i),{},{children:t}))},Re=function(e){var t=e.onModifyCollection,n=e.onModifyDataset;return(0,m.jsxs)(j.v2,{size:"sm",children:[(0,m.jsx)(j.j2,{as:y.zx,variant:"outline","data-testid":"more-actions-btn",children:(0,m.jsx)(Ie.Z,{})}),(0,m.jsxs)(j.qy,{children:[(0,m.jsxs)(j.kS,{title:"Collections",color:"gray.500",textTransform:"uppercase",mx:3,children:[(0,m.jsx)(j.R,{}),(0,m.jsx)(Ve,{isDisabled:!0,children:"Add a collection"}),(0,m.jsx)(Ve,{onClick:t,"data-testid":"modify-collection",children:"Modify collection"})]}),(0,m.jsxs)(j.kS,{title:"Datasets",color:"gray.500",textTransform:"uppercase",mx:3,children:[(0,m.jsx)(j.R,{}),(0,m.jsx)(Ve,{children:(0,m.jsx)(o.default,{href:"/dataset",children:"Select new dataset"})}),(0,m.jsx)(Ve,{isDisabled:!0,children:"Classify this dataset"}),(0,m.jsx)(Ve,{onClick:n,"data-testid":"modify-dataset",children:"Modify dataset"})]})]})]})},Ke=[{name:"Field Name",attribute:"name"},{name:"Description",attribute:"description"},{name:"Personal Data Categories",attribute:"data_categories"},{name:"Identifiability",attribute:"data_qualifier"}],Qe=function(e){var t=e.fidesKey,n=(0,f.I0)(),i=function(e){var t=(0,g.oM)(e),n=t.data;return{isLoading:t.isLoading,dataset:n}}(t),o=i.dataset,s=i.isLoading,j=(0,f.v9)(g.gR),y=(0,d.useState)(Ke),x=y[0],b=y[1],O=(0,d.useState)(!1),C=O[0],w=O[1],k=(0,d.useState)(!1),P=k[0],D=k[1],S=(0,p.MO)().data;(0,d.useEffect)((function(){n((0,p.B9)(null!==S&&void 0!==S?S:[]))}),[n,S]);var _=(0,a.useRouter)(),z=(0,c.pm)(),E=_.query.fromLoad;if((0,d.useEffect)((function(){o&&n((0,g._U)(o))}),[n,o]),(0,d.useEffect)((function(){n((0,g.Fy)(0))}),[n]),(0,d.useEffect)((function(){E&&z((0,h.t)("Successfully loaded dataset"))}),[E,z]),s)return(0,m.jsx)(l.$,{});if(!o)return(0,m.jsx)("div",{children:"Dataset not found"});var Z=o.collections,A=null!=j?Z[j]:null;return(0,m.jsxs)(r.xu,{children:[(0,m.jsxs)(r.xu,{mb:4,display:"flex",justifyContent:"space-between",children:[(0,m.jsx)(u.Ph,{onChange:function(e){n((0,g.Fy)(e.target.selectedIndex))},mr:2,width:"auto","data-testid":"collection-select",children:Z.map((function(e){return(0,m.jsx)("option",{value:e.name,children:e.name},e.name)}))}),(0,m.jsxs)(r.xu,{display:"flex",children:[(0,m.jsx)(r.xu,{mr:2,children:(0,m.jsx)(v,{allColumns:Ke,selectedColumns:x,onChange:b})}),(0,m.jsx)(Re,{onModifyCollection:function(){return w(!0)},onModifyDataset:function(){return D(!0)}})]})]}),A?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(xe,{fields:A.fields,columns:x}),(0,m.jsx)(Ce,{collection:A,isOpen:C,onClose:function(){return w(!1)}})]}):null,o?(0,m.jsx)(Ne,{dataset:o,isOpen:P,onClose:function(){return D(!1)}}):null]})},Xe=function(){var e=(0,a.useRouter)().query.id;if(!e)return(0,m.jsx)(s.Z,{title:"Dataset",children:"Dataset not found"});var t=Array.isArray(e)?e[0]:e;return(0,m.jsxs)(s.Z,{title:"Dataset - ".concat(e),children:[(0,m.jsx)(r.X6,{mb:2,fontSize:"2xl",fontWeight:"semibold",children:"Dataset"}),(0,m.jsx)(r.xu,{mb:8,children:(0,m.jsxs)(i.aG,{fontWeight:"medium",fontSize:"sm",color:"gray.600",children:[(0,m.jsx)(i.gN,{children:(0,m.jsx)(o.default,{href:"/dataset",children:"Datasets"})}),(0,m.jsx)(i.gN,{children:(0,m.jsx)(o.default,{href:"#",children:e})})]})}),(0,m.jsx)(Qe,{fidesKey:t})]})}},37035:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dataset/[id]",function(){return n(914)}])}},function(e){e.O(0,[731,785,636,906,610,656,962,512,140,946,275,80,774,888,179],(function(){return t=37035,e(e.s=t);var t}));var t=e.O();_N_E=t}]);