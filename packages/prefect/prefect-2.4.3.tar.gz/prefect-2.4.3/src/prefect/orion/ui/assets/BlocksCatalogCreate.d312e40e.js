import{d as B,u as T,c as a,e as C,r as v,g as e,o as t,f as s,w as l,k as A,aE as P,aF as $,aG as w,aH as x,aI as D,h as r,aB as F,aJ as G,ay as H,a4 as i,t as N}from"./index.647f6a83.js";import{u as R}from"./useRouteParam.58df0b75.js";import{u as m}from"./useSubscriptionWithDependencies.afeeaa8b.js";const J=B({__name:"BlocksCatalogCreate",setup(V){const u=T(),n=R("blockTypeSlug"),b=a(()=>n.value?[n.value]:null),f=m(F.getBlockTypeBySlug,b),o=a(()=>f.response),y=a(()=>o.value?[o.value.id]:null),_=m(G.getBlockSchemaForBlockType,y),p=a(()=>_.response);function d(k){H.createBlockDocument(k).then(({id:c})=>{i("Block created successfully","success"),u.push(N.block(c))}).catch(c=>{i("Failed to create block","error"),console.error(c)})}function h(){u.back()}const S=a(()=>o.value?`Create ${o.value.name} Block`:"Create Block");return C(S),(k,c)=>{const g=v("p-layout-default");return e(o)?(t(),s(g,{key:0,class:"blocks-catalog-create"},{header:l(()=>[A(e(P),{"block-type":e(o)},null,8,["block-type"])]),default:l(()=>[e(o)?(t(),s(e($),{key:0,"block-type":e(o)},{default:l(()=>[e(p)?(t(),s(e(w),x({key:0,"block-schema":e(p)},D({submit:d,cancel:h})),null,16,["block-schema"])):r("",!0)]),_:1},8,["block-type"])):r("",!0)]),_:1})):r("",!0)}}});export{J as default};
