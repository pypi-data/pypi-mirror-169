{"version":3,"file":"apiTokenModel.js","names":["RB","APIToken","BaseResource","extend","defaults","_","tokenValue","note","policy","userName","prototype","rspNamespace","url","SITE_ROOT","get","isNew","id","toJSON","JSON","stringify","parseResourceData","rsp","token","defaultPolicies","readWrite","readOnly","resources","allow","block","custom"],"sources":["apiTokenModel.es6.js"],"sourcesContent":["/**\n * An API token.\n */\nRB.APIToken = RB.BaseResource.extend({\n    /**\n     * Return defaults for the model attributes.\n     *\n     * Returns:\n     *     object:\n     *     The default values for new model instances.\n     */\n    defaults() {\n        return _.defaults({\n            tokenValue: null,\n            note: null,\n            policy: {},\n            userName: null\n        }, RB.BaseResource.prototype.defaults());\n    },\n\n    rspNamespace: 'api_token',\n\n    /**\n     * Return the URL for syncing the model.\n     *\n     * Returns:\n     *     string:\n     *     The URL to use when making HTTP requests.\n     */\n    url() {\n        const url = SITE_ROOT + (this.get('localSitePrefix') || '') +\n                    'api/users/' + this.get('userName') + '/api-tokens/';\n\n        return this.isNew() ? url : `${url}${this.id}/`;\n    },\n\n    /**\n     * Return a JSON-serializable representation of the model.\n     *\n     * Returns:\n     *     object:\n     *     An object suitable for passing into JSON.stringify.\n     */\n    toJSON() {\n        return {\n            note: this.get('note'),\n            policy: JSON.stringify(this.get('policy'))\n        };\n    },\n\n    /**\n     * Parse the response from the server.\n     *\n     * Args:\n     *     rsp (object):\n     *         The response from the server API endpoint.\n     *\n     * Returns:\n     *     object:\n     *     The parsed attribute values.\n     */\n    parseResourceData(rsp) {\n        return {\n            tokenValue: rsp.token,\n            note: rsp.note,\n            policy: rsp.policy\n        };\n    }\n}, {\n    defaultPolicies: {\n        readWrite: {},\n        readOnly: {\n            resources: {\n                '*': {\n                    allow: ['GET', 'HEAD', 'OPTIONS'],\n                    block: ['*']\n                }\n            }\n        },\n        custom: {\n            resources: {\n                '*': {\n                    allow: ['*'],\n                    block: []\n                }\n            }\n        }\n    }\n});\n"],"mappings":";;AAAA;AACA;AACA;AACAA,EAAE,CAACC,QAAH,GAAcD,EAAE,CAACE,YAAH,CAAgBC,MAAhB,CAAuB;EACjC;AACJ;AACA;AACA;AACA;AACA;AACA;EACIC,QAAQ,GAAG;IACP,OAAOC,CAAC,CAACD,QAAF,CAAW;MACdE,UAAU,EAAE,IADE;MAEdC,IAAI,EAAE,IAFQ;MAGdC,MAAM,EAAE,EAHM;MAIdC,QAAQ,EAAE;IAJI,CAAX,EAKJT,EAAE,CAACE,YAAH,CAAgBQ,SAAhB,CAA0BN,QAA1B,EALI,CAAP;EAMH,CAfgC;;EAiBjCO,YAAY,EAAE,WAjBmB;;EAmBjC;AACJ;AACA;AACA;AACA;AACA;AACA;EACIC,GAAG,GAAG;IACF,MAAMA,GAAG,GAAGC,SAAS,IAAI,KAAKC,GAAL,CAAS,iBAAT,KAA+B,EAAnC,CAAT,GACA,YADA,GACe,KAAKA,GAAL,CAAS,UAAT,CADf,GACsC,cADlD;IAGA,OAAO,KAAKC,KAAL,KAAeH,GAAf,GAAsB,GAAEA,GAAI,GAAE,KAAKI,EAAG,GAA7C;EACH,CA/BgC;;EAiCjC;AACJ;AACA;AACA;AACA;AACA;AACA;EACIC,MAAM,GAAG;IACL,OAAO;MACHV,IAAI,EAAE,KAAKO,GAAL,CAAS,MAAT,CADH;MAEHN,MAAM,EAAEU,IAAI,CAACC,SAAL,CAAe,KAAKL,GAAL,CAAS,QAAT,CAAf;IAFL,CAAP;EAIH,CA7CgC;;EA+CjC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIM,iBAAiB,CAACC,GAAD,EAAM;IACnB,OAAO;MACHf,UAAU,EAAEe,GAAG,CAACC,KADb;MAEHf,IAAI,EAAEc,GAAG,CAACd,IAFP;MAGHC,MAAM,EAAEa,GAAG,CAACb;IAHT,CAAP;EAKH;;AAhEgC,CAAvB,EAiEX;EACCe,eAAe,EAAE;IACbC,SAAS,EAAE,EADE;IAEbC,QAAQ,EAAE;MACNC,SAAS,EAAE;QACP,KAAK;UACDC,KAAK,EAAE,CAAC,KAAD,EAAQ,MAAR,EAAgB,SAAhB,CADN;UAEDC,KAAK,EAAE,CAAC,GAAD;QAFN;MADE;IADL,CAFG;IAUbC,MAAM,EAAE;MACJH,SAAS,EAAE;QACP,KAAK;UACDC,KAAK,EAAE,CAAC,GAAD,CADN;UAEDC,KAAK,EAAE;QAFN;MADE;IADP;EAVK;AADlB,CAjEW,CAAd"}