{"version":3,"file":"screenshotThumbnailViewTests.js","names":["suite","model","view","beforeEach","RB","Screenshot","url","id","attributes","set","template","ScreenshotThumbnail","el","$","appendTo","$testsScratch","render","spyOn","and","callThrough","describe","it","$caption","inlineEditor","expect","trigger","toHaveBeenCalledWith","$el","find","val","triggerHandler","get","toBe","save","toHaveBeenCalled","callFake","options","success","done","click","ajax","destroy","calls","argsFor","fadeOut","remove"],"sources":["screenshotThumbnailViewTests.es6.js"],"sourcesContent":["suite('rb/views/ScreenshotThumbnail', function() {\n    let model;\n    let view;\n\n    beforeEach(function() {\n        model = new RB.Screenshot();\n        model.url = '/screenshots/123/';\n        model.id = 123;\n        model.attributes.id = 123;\n        model.set('loaded', true);\n\n        const template =\n            '<div><a class=\"edit\"></a><a class=\"delete\">X</a></div>';\n\n        view = new RB.ScreenshotThumbnail({\n            el: $(template).appendTo($testsScratch),\n            model: model,\n        });\n        view.render();\n\n        spyOn(model, 'trigger').and.callThrough();\n        spyOn(view, 'trigger').and.callThrough();\n    });\n\n    describe('Actions', function() {\n        it('Begin caption editing', function() {\n            view.$caption.inlineEditor('startEdit');\n            expect(view.trigger).toHaveBeenCalledWith('beginEdit');\n        });\n\n        it('Cancel caption editing', function() {\n            view.$caption.inlineEditor('startEdit');\n            expect(view.trigger).toHaveBeenCalledWith('beginEdit');\n\n            view.$caption.inlineEditor('cancel');\n            expect(view.trigger).toHaveBeenCalledWith('endEdit');\n        });\n\n        it('Save caption', function() {\n            spyOn(model, 'save');\n\n            view.$caption.inlineEditor('startEdit');\n            expect(view.trigger).toHaveBeenCalledWith('beginEdit');\n\n            view.$el.find('input')\n                .val('Foo')\n                .triggerHandler('keyup');\n            view.$caption.inlineEditor('submit');\n\n            expect(view.trigger).toHaveBeenCalledWith('endEdit');\n            expect(model.get('caption')).toBe('Foo');\n            expect(model.save).toHaveBeenCalled();\n        });\n\n        it('Delete', function() {\n            spyOn(model, 'destroy').and.callThrough();\n            spyOn($, 'ajax').and.callFake(options => options.success());\n            spyOn(view.$el, 'fadeOut').and.callFake(done => done());\n\n            spyOn(view, 'remove');\n\n            view.$el.find('a.delete').click();\n\n            expect($.ajax).toHaveBeenCalled();\n            expect(model.destroy).toHaveBeenCalled();\n            expect(model.trigger.calls.argsFor(0)[0]).toBe('destroying');\n            expect(view.$el.fadeOut).toHaveBeenCalled();\n            expect(view.remove).toHaveBeenCalled();\n        });\n    });\n});\n"],"mappings":"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"}