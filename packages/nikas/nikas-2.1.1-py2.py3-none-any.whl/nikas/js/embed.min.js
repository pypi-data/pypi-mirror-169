!function(){var e={809:function(e,t,n){for(var a,i,r=n(673),o=n(923),s=function(){return window.location.pathname},l=document.getElementsByTagName("script"),c=0;c<l.length;c++)if(l[c].hasAttribute("data-nikas")){i=l[c].getAttribute("data-nikas");break}if(!i){for(c=0;c<l.length;c++)if(l[c].getAttribute("async")||l[c].getAttribute("defer"))throw"Nikas's automatic configuration detection failed, please refer to https://docs.nikasproject.ir/config/client.html and add a custom `data-nikas` attribute.";a=l[l.length-1],i=a.src.substring(0,a.src.length-"/js/embed.min.js".length)}"/"===i[i.length-1]&&(i=i.substring(0,i.length-1));var u=function(e,t,n,a,i){var r=new XMLHttpRequest;try{r.open(e,t,!0),r.withCredentials=!0,r.setRequestHeader("Content-Type","application/json"),r.onreadystatechange=function(){4===r.readyState&&function(){var e=r.getResponseHeader("Date");null!==e&&o.offset.update(new Date(e));var t=r.getResponseHeader("X-Set-Cookie");t&&t.match(/^nikas-/)&&(document.cookie=t),r.status>=500?i&&i(r.body):a({status:r.status,body:r.responseText})}()}}catch(e){(i||console.log)(e.message)}r.send(n)},d=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&null!==e[n]&&void 0!==e[n]&&(t+=n+"="+encodeURIComponent(e[n])+"&");return t.substring(0,t.length-1)};e.exports={endpoint:i,salt:"Eech7co8Ohloopo9Ol6baimi",create:function(e,t){var n=r.defer();return u("POST",i+"/new?"+d({uri:e||s()}),JSON.stringify(t),(function(e){201===e.status||202===e.status?n.resolve(JSON.parse(e.body)):n.reject(e.body)})),n.promise},modify:function(e,t){var n=r.defer();return u("PUT",i+"/id/"+e,JSON.stringify(t),(function(e){403===e.status?n.reject("Not authorized to modify this comment!"):200===e.status?n.resolve(JSON.parse(e.body)):n.reject(e.body)})),n.promise},remove:function(e){var t=r.defer();return u("DELETE",i+"/id/"+e,null,(function(e){403===e.status?t.reject("Not authorized to remove this comment!"):200===e.status?t.resolve(null===JSON.parse(e.body)):t.reject(e.body)})),t.promise},view:function(e,t){var n=r.defer();return u("GET",i+"/id/"+e+"?"+d({plain:t}),null,(function(e){n.resolve(JSON.parse(e.body))})),n.promise},fetch:function(e,t,n,a,o){void 0===t&&(t="inf"),void 0===n&&(n="inf"),void 0===a&&(a=null);var l={uri:e||s(),after:o,parent:a};"inf"!==t&&(l.limit=t),"inf"!==n&&(l.nested_limit=n);var c=r.defer();return u("GET",i+"/?"+d(l),null,(function(e){200===e.status?c.resolve(JSON.parse(e.body)):404===e.status?c.resolve({total_replies:0}):c.reject(e.body)})),c.promise},count:function(e){var t=r.defer();return u("POST",i+"/count",JSON.stringify(e),(function(e){200===e.status?t.resolve(JSON.parse(e.body)):t.reject(e.body)})),t.promise},like:function(e){var t=r.defer();return u("POST",i+"/id/"+e+"/like",null,(function(e){t.resolve(JSON.parse(e.body))})),t.promise},dislike:function(e){var t=r.defer();return u("POST",i+"/id/"+e+"/dislike",null,(function(e){t.resolve(JSON.parse(e.body))})),t.promise},feed:function(e){return i+"/feed?"+d({uri:e||s()})},preview:function(e){var t=r.defer();return u("POST",i+"/preview",JSON.stringify({text:e}),(function(e){200===e.status?t.resolve(JSON.parse(e.body).text):t.reject(e.body)})),t.promise}}},323:function(e,t,n){for(var a=n(899),i={css:!0,"css-url":null,lang:"","default-lang":"fa","reply-to-self":!1,"require-email":!1,"require-author":!1,"reply-notifications":!1,"max-comments-top":"inf","max-comments-nested":5,"reveal-on-click":5,gravatar:!1,avatar:!0,"avatar-bg":"#f0f0f0","avatar-fg":["#9abf88","#5698c4","#e279a3","#9163b6","#be5168","#f19670","#e4bf80","#447c69"].join(" "),vote:!0,"vote-levels":null,feed:!1,theme:"light"},r=document.getElementsByTagName("script"),o=0;o<r.length;o++)for(var s=0;s<r[o].attributes.length;s++){var l=r[o].attributes[s];if(/^data-nikas-/.test(l.name))try{i[l.name.substring(11)]=JSON.parse(l.value)}catch(e){i[l.name.substring(11)]=l.value}}i["avatar-fg"]=i["avatar-fg"].split(" ");var c=[],u=!1;if(i.lang&&c.push(a.normalize_bcp47(i.lang)),navigator.languages)for(o=0;o<navigator.languages.length;o++)navigator.languages[o]&&(u=!0,c.push(a.normalize_bcp47(navigator.languages[o])));!u&&navigator.language&&(u=!0,c.push(a.normalize_bcp47(navigator.language))),!u&&navigator.userLanguage&&(u=!0,c.push(a.normalize_bcp47(navigator.userLanguage))),i["default-lang"]&&c.push(a.normalize_bcp47(i["default-lang"])),c.push("fa"),i.langs=c,delete i.lang,delete i["default-lang"],e.exports=i},864:function(e,t,n){var a=n(809),i=n(924),r=n(487);e.exports=function(){var e={};i.each("a",(function(t){if(t.href.match&&t.href.match(/#nikas-thread$/)){var n=t.getAttribute("data-nikas-id")||t.href.match(/^(.+)#nikas-thread$/)[1].replace(/^.*\/\/[^\/]+/,"");n in e?e[n].push(t):e[n]=[t]}}));var t=Object.keys(e);a.count(t).then((function(n){for(var a in e)if(e.hasOwnProperty(a))for(var i=t.indexOf(a),o=0;o<e[a].length;o++)e[a][o].textContent=r.pluralize("num-comments",n[i])}))}},924:function(e){"use strict";function t(e){this.obj=e,this.replace=function(t){var n=a.htmlify(t);return e.parentNode.replaceChild(n.obj,e),n},this.prepend=function(t){var n=a.htmlify(t);return e.insertBefore(n.obj,e.firstChild),n},this.append=function(t){var n=a.htmlify(t);return e.appendChild(n.obj),n},this.insertAfter=function(t){var n=a.htmlify(t);return e.parentNode.insertBefore(n.obj,e.nextSibling),n},this.on=function(t,n,a){e.addEventListener(t,(function(e){n(e),(void 0===a||a)&&e.preventDefault()}))},this.toggle=function(e,t,a){var i=new n(t,a);this.on(e,(function(){i.next()}))},this.detach=function(){return e.parentNode.removeChild(this.obj),this},this.remove=function(){e.parentNode.removeChild(this.obj)},this.show=function(){e.style.display="block"},this.hide=function(){e.style.display="none"},this.setText=function(t){e.textContent=t},this.setHtml=function(t){e.innerHTML=t},this.blur=function(){e.blur()},this.focus=function(){e.focus()},this.scrollIntoView=function(t){e.scrollIntoView(t)},this.checked=function(){return e.checked},this.setAttribute=function(t,n){e.setAttribute(t,n)},this.getAttribute=function(t){return e.getAttribute(t)},this.classList=e.classList,Object.defineProperties(this,{textContent:{get:function(){return e.textContent},set:function(t){e.textContent=t}},innerHTML:{get:function(){return e.innerHTML},set:function(t){e.innerHTML=t}},value:{get:function(){return e.value},set:function(t){e.value=t}},placeholder:{get:function(){return e.placeholder},set:function(t){e.placeholder=t}}})}var n=function(e,t){this.state=!1,this.next=function(){this.state?(this.state=!1,t(this)):(this.state=!0,e(this))},this.wait=function(){this.state=!this.state}},a=function(e,n,a){void 0===a&&(a=!0),n||(n=window.document),n instanceof t&&(n=n.obj);var i=[].slice.call(n.querySelectorAll(e),0);return 0===i.length?null:1===i.length&&a?new t(i[0]):(i=[].slice.call(i,0)).map((function(e){return new t(e)}))};a.htmlify=function(e){if(e instanceof t)return e;if(e instanceof window.Element)return new t(e);var n=a.new("div");return n.innerHTML=e,new t(n.firstChild)},a.new=function(e,t){var n=document.createElement(e.split(".")[0]);return e.split(".").slice(1).forEach((function(e){n.classList.add(e)})),["A","LINK"].indexOf(n.nodeName)>-1&&(n.href="#"),t||0===t||(t=""),["TEXTAREA","INPUT"].indexOf(n.nodeName)>-1?n.value=t:n.textContent=t,n},a.each=function(e,t){Array.prototype.forEach.call(document.getElementsByTagName(e),t)},e.exports=a},923:function(e){"use strict";var t=function(){this.values=[]};t.prototype.update=function(e){this.values.push((new Date).getTime()-e.getTime())},t.prototype.localTime=function(){return new Date((new Date).getTime()-this.values.reduce((function(e,t){return e+t}))/this.values.length)};var n=new t;e.exports={offset:n}},487:function(e,t,n){var a,i,r,o=n(323),s={fa:n(220)};for(let e of o.langs){if(r=s[a=e],(i=function(e,t){return e[1===t?0:1]})&&r)break;if(/-/.test(a)&&(a=a.split("-",1)[0],r=s[a],(i=function(e,t){return e[1===t?0:1]})&&r))break}i&&r||(i=function(e,t){return e[1===t?0:1]},r=s[a="fa"]);var l=function(e){return o[e+"-text-"+a]||r[e]||en[e]||"[?"+e+"]"},c=function(e,t){var n;return(n=l(e)).indexOf("\n")>-1&&(n=i(n.split("\n"),+t)),n?n.replace("{{ n }}",+t):n};e.exports={ago:function(e,t){var n=(e.getTime()-t.getTime())/1e3;(isNaN(n)||n<0)&&(n=0);var a=Math.floor(n/60),i=Math.floor(a/60),r=Math.floor(i/24);return n<=45&&l("date-now")||n<=90&&c("date-minute",1)||a<=45&&c("date-minute",a)||a<=90&&c("date-hour",1)||i<=22&&c("date-hour",i)||i<=36&&c("date-day",1)||r<=5&&c("date-day",r)||r<=8&&c("date-week",1)||r<=21&&c("date-week",Math.floor(r/7))||r<=45&&c("date-month",1)||r<=345&&c("date-month",Math.floor(r/30))||r<=547&&c("date-year",1)||c("date-year",Math.floor(r/365.25))},lang:a,translate:l,pluralize:c}},220:function(e){e.exports={"postbox-text":"متن نظر را اینجا وارد کنید - حداقل ۳ حرف","postbox-author":"نام (اختیاری)","postbox-email":"آدرس ایمیل (اختیاری)","postbox-website":"آدرس وب سایت (اختیاری)","postbox-preview":"پیش نمایش","postbox-edit":"ویرایش","postbox-submit":"ثبت","postbox-notification":"اطلاع رسانی از طریق ایمیل","num-comments":"یک نظر\n{{ n }} نظر","no-comments":"هنوز نظری ثبت نشده است","atom-feed":"فید اتم","comment-reply":"پاسخ","comment-edit":"ویرایش","comment-save":"ذخیره","comment-delete":"حذف","comment-confirm":"تایید","comment-close":"بستن","comment-cancel":"لغو","comment-deleted":"نظر حذف شد","comment-queued":"در انتظار بررسی توسط مدیریت","comment-anonymous":"ناشناس","comment-hidden":"{{ n }} مخفی","date-now":"همین الان","date-minute":"یک دقیقه پیش\n{{ n }} دقیقه پیش","date-hour":"یک ساعت پیش\n{{ n }} ساعت پیش","date-day":"دیروز\n{{ n }} روز پیش","date-week":"هفته پیش\n{{ n }} هفته پیش","date-month":"ماه پیش\n{{ n }} ماه پیش","date-year":"سال پیش\n{{ n }} سال پیش"}},244:function(e,t,n){var a=n(673),i=function(e,t,n,a,i,r){var o=document.createElementNS("http://www.w3.org/2000/svg","rect");o.setAttribute("x",a+t*i),o.setAttribute("y",a+n*i),o.setAttribute("width",i),o.setAttribute("height",i),o.setAttribute("style","fill: "+r),e.appendChild(o)},r=function(e,t,n,r){var o=document.createElementNS("http://www.w3.org/2000/svg","svg");return o.setAttribute("version","1.1"),o.setAttribute("viewBox","0 0 "+n+" "+n),o.setAttribute("preserveAspectRatio","xMinYMin meet"),o.setAttribute("shape-rendering","crispEdges"),i(o,0,0,0,n+2*t,r["avatar-bg"]),null===typeof e||a.when(e,(function(e){var n,a=(18,(n=(parseInt(e.substr(-16),16)%Math.pow(2,18)).toString(2)).length>=18?n:new Array(18-n.length+1).join("0")+n),s=0;o.setAttribute("data-hash",e);for(var l=parseInt(a.substring(a.length-3,a.length),2),c=r["avatar-fg"][l%r["avatar-fg"].length],u=0;u<Math.ceil(2.5);u++)for(var d=0;d<5;d++)"1"===a.charAt(s)&&(i(o,u,d,t,8,c),u<Math.floor(2.5)&&i(o,4-u,d,t,8,c)),s++})),o};e.exports={generate:r,blank:function(e,t,n){var a=parseInt([0,1,1,1,1,1,0,1,1,0,1,1,1,1,1,0,1,0].join(""),2).toString(16),i=r(a,e,t,n);return i.setAttribute("className","blank"),i}}},673:function(e){"use strict";var t=function(e){console.log(e)},n=function(){this.success=[],this.errors=[]};n.prototype.then=function(e,n){this.success.push(e),n?this.errors.push(n):this.errors.push(t)};var a=function(){this.promise=new n};a.prototype={promise:n,resolve:function(e){this.promise.success.forEach((function(t){window.setTimeout((function(){t(e)}),0)}))},reject:function(e){this.promise.errors.forEach((function(t){window.setTimeout((function(){t(e)}),0)}))}},e.exports={defer:function(){return new a},when:function(e,t){return e instanceof n?e.then(t):t(e)}}},208:function(e){"use strict";var t=!1,n=function(e){t||(t=!0,e())};e.exports=function(e){document.addEventListener("DOMContentLoaded",(function(){n(e)})),"interactive"!==document.readyState&&"complete"!==document.readyState||n(e)}},504:function(e,t,n){var a=n(924),i=n(899),r=n(323),o=n(809),s=n(357),l=n(487),c=n(244),u=n(923),d=function(e){return(e=a.htmlify(e)).setAttribute("contentEditable",!0),e.on("focus",(function(){e.classList.contains("nikas-placeholder")&&(e.innerHTML="",e.classList.remove("nikas-placeholder"))})),e.on("blur",(function(){0===e.textContent.length&&(e.textContent=l.translate("postbox-text"),e.classList.add("nikas-placeholder"))})),e},f=function(e){var t=i.localStorageImpl,n=a.htmlify(s.render("postbox",{author:JSON.parse(t.getItem("nikas-author")),email:JSON.parse(t.getItem("nikas-email")),website:JSON.parse(t.getItem("nikas-website")),preview:""}));n.onsuccess=function(){},n.validate=function(){return i.text(a(".nikas-textarea",this).innerHTML).length<3||a(".nikas-textarea",this).classList.contains("nikas-placeholder")?(a(".nikas-textarea",this).focus(),!1):r["require-email"]&&a("[name='email']",this).value.length<=0?(a("[name='email']",this).focus(),!1):!(r["require-author"]&&a("[name='author']",this).value.length<=0&&(a("[name='author']",this).focus(),1))};var l=function(){r["reply-notifications"]&&a("[name='email']",n).value.length>0?a(".nikas-notification-section",n).show():a(".nikas-notification-section",n).hide()};a("[name='email']",n).on("input",l),l(),r["require-email"]&&a("[name='email']",n).setAttribute("placeholder",a("[name='email']",n).getAttribute("placeholder").replace(/ \(.*\)/,"")),r["require-author"]&&(a("[name='author']",n).placeholder=a("[name='author']",n).placeholder.replace(/ \(.*\)/,"")),a("[name='preview']",n).on("click",(function(){o.preview(i.text(a(".nikas-textarea",n).innerHTML)).then((function(e){a(".preview .text",n).innerHTML=e,n.classList.add("nikas-preview-mode")}))}));var c=function(){a(".nikas-preview .nikas-text",n).innerHTML="",n.classList.remove("nikas-preview-mode")};return a("[name='edit']",n).on("click",c),a(".nikas-preview",n).on("click",c),a("[type=submit]",n).on("click",(function(){if(c(),n.validate()){var r=a("[name=author]",n).value||null,s=a("[name=email]",n).value||null,l=a("[name=website]",n).value||null;t.setItem("nikas-author",JSON.stringify(r)),t.setItem("nikas-email",JSON.stringify(s)),t.setItem("nikas-website",JSON.stringify(l)),o.create(a("#nikas-thread").getAttribute("data-nikas-id"),{author:r,email:s,website:l,text:i.text(a(".nikas-textarea",n).innerHTML),parent:e||null,title:a("#nikas-thread").getAttribute("data-title")||null,notification:a("[name=notification]",n).checked()?1:0}).then((function(t){a(".nikas-textarea",n).innerHTML="",a(".nikas-textarea",n).blur(),m(t,!0),null!==e&&n.onsuccess()}))}})),d(a(".nikas-textarea",n)),n},p=function(e,t){var n;null===e.id?(n=a("#nikas-root"),e.name="null"):(n=a("#nikas-"+e.id+" > .nikas-text-wrapper > .nikas-follow-up"),e.name=e.id);var i=a.htmlify(s.render("comment-loader",{comment:e}));n.append(i),a("a.nikas-load-hidden",i).on("click",(function(){i.remove(),o.fetch(a("#nikas-thread").getAttribute("data-nikas-id"),r["reveal-on-click"],r["max-comments-nested"],e.id,t).then((function(e){if(0!==e.total_replies){var t=0;e.replies.forEach((function(e){m(e,!1),e.created>t&&(t=e.created)})),e.hidden_replies>0&&p(e,t)}}),(function(e){console.log(e)}))}))},m=function(e,t){var n=a.htmlify(s.render("comment",{comment:e})),h=function(){a(".nikas-permalink > time",n).textContent=l.ago(u.offset.localTime(),new Date(1e3*parseInt(e.created,10))),setTimeout(h,6e4)};h(),r.avatar&&a(".nikas-avatar > svg",n).replace(c.generate(e.hash,4,48,r)),(null===e.parent?a("#nikas-root"):a("#nikas-"+e.parent+" > .nikas-text-wrapper > .nikas-follow-up")).append(n),t&&n.scrollIntoView();var v=a("#nikas-"+e.id+" > .nikas-text-wrapper > .nikas-comment-footer"),g=a("#nikas-"+e.id+" > .nikas-text-wrapper > .nikas-comment-header"),k=a("#nikas-"+e.id+" > .nikas-text-wrapper > .nikas-text"),w=null;if(a("a.nikas-reply",v).toggle("click",(function(t){(w=v.insertAfter(new f(null===e.parent?e.id:e.parent))).onsuccess=function(){t.next()},a(".nikas-textarea",w).focus(),a("a.nikas-reply",v).textContent=l.translate("comment-close")}),(function(){w.remove(),a("a.nikas-reply",v).textContent=l.translate("comment-reply")})),r.vote){var x=r["vote-levels"];"string"==typeof x&&(x=x.split(","));var b=function(e){var t=a("span.nikas-votes",v);if(null===t?v.prepend(a.new("span.nikas-votes",e)):t.textContent=e,e?n.classList.remove("nikas-no-votes"):n.classList.add("nikas-no-votes"),x)for(var i=!0,r=0;r<=x.length;r++)i&&(r>=x.length||e<x[r])?(n.classList.add("nikas-vote-level-"+r),i=!1):n.classList.remove("nikas-vote-level-"+r)};a("a.nikas-upvote",v).on("click",(function(){o.like(e.id).then((function(e){b(e.likes-e.dislikes)}))})),a("a.nikas-downvote",v).on("click",(function(){o.dislike(e.id).then((function(e){b(e.likes-e.dislikes)}))})),b(e.likes-e.dislikes)}a("a.nikas-edit",v).toggle("click",(function(t){var s=a("a.nikas-edit",v),c=r.avatar||r.gravatar?a(".nikas-avatar",n,!1)[0]:null;s.textContent=l.translate("comment-save"),s.insertAfter(a.new("a.nikas-cancel",l.translate("comment-cancel"))).on("click",(function(){t.canceled=!0,t.next()})),t.canceled=!1,o.view(e.id,1).then((function(e){var t=d(a.new("div.nikas-textarea"));t.innerHTML=i.detext(e.text),t.focus(),k.classList.remove("nikas-text"),k.classList.add("nikas-textarea-wrapper"),k.textContent="",k.append(t)})),null!==c&&c.hide()}),(function(t){var s=a(".nikas-textarea",k),c=r.avatar||r.gravatar?a(".nikas-avatar",n,!1)[0]:null;if(t.canceled||null===s)k.innerHTML=e.text;else{if(i.text(s.innerHTML).length<3)return s.focus(),void t.wait();o.modify(e.id,{text:i.text(s.innerHTML)}).then((function(t){k.innerHTML=t.text,e.text=t.text}))}k.classList.remove("nikas-textarea-wrapper"),k.classList.add("nikas-text"),null!==c&&c.show(),a("a.nikas-cancel",v).remove(),a("a.nikas-edit",v).textContent=l.translate("comment-edit")})),a("a.nikas-delete",v).toggle("click",(function(e){var t=a("a.nikas-delete",v),n=!e.state;t.textContent=l.translate("comment-confirm"),t.on("mouseout",(function(){t.textContent=l.translate("comment-delete"),e.state=n,t.onmouseout=null}))}),(function(){var t=a("a.nikas-delete",v);o.remove(e.id).then((function(e){e?n.remove():(a("span.nikas-note",g).textContent=l.translate("comment-deleted"),k.innerHTML="<p>&nbsp;</p>",a("a.nikas-edit",v).remove(),a("a.nikas-delete",v).remove()),t.textContent=l.translate("comment-delete")}))}));var y=function(t){i.cookie("nikas-"+e.id)?setTimeout((function(){y(t)}),15e3):null!==a(t,v)&&a(t,v).remove()};y("a.nikas-edit"),y("a.nikas-delete");var T=function(t){i.cookie("nikas-"+e.id)?setTimeout((function(){T(t)}),15e3):v.append(t)};if(!r["reply-to-self"]&&i.cookie("nikas-"+e.id)&&T(a("a.nikas-reply",v).detach()),e.hasOwnProperty("replies")){var C=0;e.replies.forEach((function(e){m(e,!1),e.created>C&&(C=e.created)})),e.hidden_replies>0&&p(e,C)}};e.exports={insert:m,insert_loader:p,Postbox:f}},992:function(e,t,n){e.exports={"arrow-down":n(144),"arrow-up":n(460)}},357:function(e,t,n){var a=n(899),i=n(414),r=n(580),o=n(743),s={},l={},c=function(e,t){l[e]=t},u=function(e,t){s[e]=t};c("postbox",i),c("comment",r),c("comment-loader",o),u("bool",(function(e){return!!e})),u("humanize",(function(e){return"object"!=typeof e&&(e=new Date(1e3*parseInt(e,10))),e.toString()})),u("datetime",(function(e){return"object"!=typeof e&&(e=new Date(1e3*parseInt(e,10))),[e.getUTCFullYear(),a.pad(e.getUTCMonth(),2),a.pad(e.getUTCDay(),2)].join("-")+"T"+[a.pad(e.getUTCHours(),2),a.pad(e.getUTCMinutes(),2),a.pad(e.getUTCSeconds(),2)].join(":")+"Z"})),e.exports={set:u,render:function(e,t){var n;if(!l[e])throw new Error("Template not found: '"+e+"'");t=t||{};var a=[];for(var i in t)t.hasOwnProperty(i)&&!s.hasOwnProperty(i)&&(a.push(i),s[i]=t[i]);n=(n=(n=l[e](s)).replace(/\r?\n|\r/g," ")).trim();for(let e of a)delete s[e];return n}}},743:function(e){e.exports=function(e){var t=e.comment,n=e.pluralize;return"<div class='nikas-comment-loader' id='nikas-loader-"+t.name+"'><a class='nikas-load-hidden' href='#'>"+n("comment-hidden",t.hidden_replies)+"</a></div>"}},580:function(e){e.exports=function(e){var t=e.i18n,n=e.comment,a=e.conf,i=e.datetime,r=e.humanize,o=e.svg,s=n.author?n.author:t("comment-anonymous");return"<div class='nikas-comment' id='nikas-"+n.id+"'>"+(a.gravatar?"<div class='nikas-avatar'><img src='"+n.gravatar_image+"'></div>":"")+(a.avatar?"<div class='nikas-avatar'><svg data-hash='"+n.hash+"'</svg></div>":"")+"<div class='nikas-text-wrapper'><div class='nikas-comment-header' role='meta'>"+(n.website?"<a class='nikas-author' href='"+n.website+"' rel='nofollow'>"+s+"</a>":"<span class='nikas-author'>"+s+"</span>")+"<span class='nikas-spacer'>&bull;</span><a class='nikas-permalink' href='#nikas-"+n.id+"'><time title='"+r(n.created)+"' datetime='"+i(n.created)+"'>"+r(n.created)+"</time></a><span class='nikas-note'>"+(2==n.mode?t("comment-queued"):4==n.mode?t("comment-deleted"):"")+"</span></div><div class='nikas-text'>"+(4==n.mode?"<p>&nbsp;</p>":n.text)+"</div><div class='nikas-comment-footer'>"+(a.vote?"<a class='nikas-upvote' href='#'>"+o["arrow-up"]+"</a><span class='nikas-spacer'>|</span><a class='nikas-downvote' href='#'>"+o["arrow-down"]+"</a>":"")+"<a class='nikas-reply' href='#'>"+t("comment-reply")+"</a><a class='nikas-edit' href='#'>"+t("comment-edit")+"</a><a class='nikas-delete' href='#'>"+t("comment-delete")+"</a></div><div class='nikas-follow-up'></div></div></div>"}},414:function(e){e.exports=function(e){var t=e.i18n,n=e.author,a=e.email,i=e.website;return"<div class='nikas-postbox'><p class='nikas-copyright'>Powered by<a href='https://www.nikasproject.ir?utm_source=Client' target='_blank'>Nikas</a></p><div class='nikas-form-wrapper'><div class='nikas-textarea-wrapper'><div class='nikas-textarea nikas-placeholder' contenteditable='true'>"+t("postbox-text")+"</div><div class='nikas-preview'><div class='nikas-comment'><div class='nikas-text-wrapper'><div class='nikas-text'></div></div></div></div></div><section class='nikas-auth-section'><p class='nikas-input-wrapper'><input type='text' name='author' placeholder='"+t("postbox-author")+"' value='"+(n||"")+"' /></p><p class='nikas-input-wrapper'><input type='email' name='email' placeholder='"+t("postbox-email")+"' value='"+(a||"")+"' /></p><p class='nikas-input-wrapper'><input type='text' name='website' placeholder='"+t("postbox-website")+"' value='"+(i||"")+"' /></p><p class='nikas-post-action'><input type='submit' value='"+t("postbox-submit")+"' /></p><p class='nikas-post-action'><input type='button' name='preview' value='"+t("postbox-preview")+"' /></p><p class='nikas-post-action'><input type='button' name='edit' value='"+t("postbox-edit")+"' /></p></section><section class='nikas-notification-section'><label><input type='checkbox' name='notification' />"+t("postbox-notification")+"</label></section></div></div>"}},899:function(e){"use strict";var t,n,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};try{localStorage.setItem("x","y"),localStorage.removeItem("x"),t=localStorage}catch(e){n={},t={setItem:function(e,t){n[e]=t},getItem:function(e){return void 0!==n[e]?n[e]:null},removeItem:function(e){delete n[e]}}}e.exports={cookie:function(e){return(document.cookie.match("(^|; )"+e+"=([^;]*)")||0)[2]},detext:function(e){return(e=String(e).replace(/[&<>"'\/]/g,(function(e){return a[e]}))).replace(/\n\n/gi,"<br><div><br></div>").replace(/\n/gi,"<br>")},localStorageImpl:t,normalize_bcp47:function(e){for(var t=e.toLowerCase().split(/[_-]/),n=!1,a=0;a<t.length;a++)1===t[a].length?n=!0:n||0===a?n=!1:2===t[a].length?t[a]=t[a].toUpperCase():4===t[a].length&&(t[a]=t[a].charAt(0).toUpperCase()+t[a].substr(1));return t.join("-")},pad:function(e,t,n){return n=n||"0",(e+="").length>=t?e:new Array(t-e.length+1).join(n)+e},text:function(e){var t=document.createElement("div");return t.innerHTML=e.replace(/<div><br><\/div>/gi,"<br>").replace(/<div>/gi,"<br>").replace(/<br>/gi,"\n").replace(/&nbsp;/gi," "),t.textContent.trim()}}},144:function(e){"use strict";e.exports='<svg width="16"\n    height="16"\n    viewBox="0 0 32 32"\n    xmlns="http://www.w3.org/2000/svg"\n    xmlns:xlink="http://www.w3.org/1999/xlink"\n    fill="gray">\n    <g>\n        <path d="M 24.773,13.701c-0.651,0.669-7.512,7.205-7.512,7.205C 16.912,21.262, 16.456,21.44, 16,21.44c-0.458,0-0.914-0.178-1.261-0.534 c0,0-6.861-6.536-7.514-7.205c-0.651-0.669-0.696-1.87,0-2.586c 0.698-0.714, 1.669-0.77, 2.522,0L 16,17.112l 6.251-5.995 c 0.854-0.77, 1.827-0.714, 2.522,0C 25.47,11.83, 25.427,13.034, 24.773,13.701z">\n        </path>\n    </g>\n</svg>\n'},460:function(e){"use strict";e.exports='<svg width="16"\n    height="16"\n    viewBox="0 0 32 32"\n    xmlns="http://www.w3.org/2000/svg"\n    xmlns:xlink="http://www.w3.org/1999/xlink"\n    fill="gray">\n    <g>\n        <path d="M 24.773,18.299c-0.651-0.669-7.512-7.203-7.512-7.203C 16.912,10.739, 16.456,10.56, 16,10.56c-0.458,0-0.914,0.179-1.261,0.536 c0,0-6.861,6.534-7.514,7.203c-0.651,0.669-0.696,1.872,0,2.586c 0.698,0.712, 1.669,0.77, 2.522,0L 16,14.89l 6.251,5.995 c 0.854,0.77, 1.827,0.712, 2.522,0C 25.47,20.17, 25.427,18.966, 24.773,18.299z">\n        </path>\n    </g>\n</svg>\n'}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}!function(){var e,t,a=n(208),i=n(323),r=n(487),o=n(809),s=n(504),l=n(864),c=n(924),u=n(992),d=n(357);function f(){if(e=c("#nikas-thread"),t=c.new("h4"),i.css&&null===c("style#nikas-style")){var n;"dark"===i.theme?n="dark":("light"===i.theme||console.log("Nikas: Unknown theme '%s', using 'light' instead",i.theme),n="light");var a=c.new("link");a.id="nikas-style",a.rel="stylesheet",a.type="text/css",a.href=i["css-url"]?i["css-url"]:o.endpoint+"/css/nikas-"+n+".css",c("head").append(a)}if(l(),null===e)return console.log("abort, #nikas-thread is missing");if(i.feed){var s=c.new("a",r.translate("atom-feed")),u=c.new("span.nikas-feedlink");s.href=o.feed(e.getAttribute("data-nikas-id")),u.appendChild(s),e.append(u)}e.append(t),e.append('<div id="nikas-root"></div>')}function p(){if(c("#nikas-root")){var n=c("#nikas-root");n.textContent="",o.fetch(e.getAttribute("data-nikas-id")||location.pathname,i["max-comments-top"],i["max-comments-nested"]).then((function(e){for(var a in e.config)a in i&&i[a]!=e.config[a]&&console.log("Nikas: Client value '%s' for setting '%s' overridden by server value '%s'.\nIn future, some 'data-nikas-%s' options will only configured via the server to keep client and server in sync",i[a],a,e.config[a],a),i[a]=e.config[a];if(n.prepend(new s.Postbox(null)),0!==e.total_replies){var o=0,l=e.total_replies;e.replies.forEach((function(e){s.insert(e,!1),e.created>o&&(o=e.created),l+=e.total_replies})),t.textContent=r.pluralize("num-comments",l),e.hidden_replies>0&&s.insert_loader(e,o),window.location.hash.length>0&&window.location.hash.match("^#nikas-[0-9]+$")&&c(window.location.hash).scrollIntoView()}else t.textContent=r.translate("no-comments")}),(function(e){console.log(e)}))}}d.set("conf",i),d.set("i18n",r.translate),d.set("pluralize",r.pluralize),d.set("svg",u),a((function(){f(),p()})),window.Nikas={init:f,fetchComments:p}}()}();