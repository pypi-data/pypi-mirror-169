!function(){var t,e,n={809:function(t,e,n){for(var r,o,i=n(673),a=n(923),s=function(){return window.location.pathname},u=document.getElementsByTagName("script"),c=0;c<u.length;c++)if(u[c].hasAttribute("data-nikas")){o=u[c].getAttribute("data-nikas");break}if(!o){for(c=0;c<u.length;c++)if(u[c].getAttribute("async")||u[c].getAttribute("defer"))throw"Nikas's automatic configuration detection failed, please refer to https://docs.nikasproject.ir/config/client.html and add a custom `data-nikas` attribute.";r=u[u.length-1],o=r.src.substring(0,r.src.length-"/js/embed.min.js".length)}"/"===o[o.length-1]&&(o=o.substring(0,o.length-1));var l=function(t,e,n,r,o){var i=new XMLHttpRequest;try{i.open(t,e,!0),i.withCredentials=!0,i.setRequestHeader("Content-Type","application/json"),i.onreadystatechange=function(){4===i.readyState&&function(){var t=i.getResponseHeader("Date");null!==t&&a.offset.update(new Date(t));var e=i.getResponseHeader("X-Set-Cookie");e&&e.match(/^nikas-/)&&(document.cookie=e),i.status>=500?o&&o(i.body):r({status:i.status,body:i.responseText})}()}}catch(t){(o||console.log)(t.message)}i.send(n)},f=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&null!==t[n]&&void 0!==t[n]&&(e+=n+"="+encodeURIComponent(t[n])+"&");return e.substring(0,e.length-1)};t.exports={endpoint:o,salt:"Eech7co8Ohloopo9Ol6baimi",create:function(t,e){var n=i.defer();return l("POST",o+"/new?"+f({uri:t||s()}),JSON.stringify(e),(function(t){201===t.status||202===t.status?n.resolve(JSON.parse(t.body)):n.reject(t.body)})),n.promise},modify:function(t,e){var n=i.defer();return l("PUT",o+"/id/"+t,JSON.stringify(e),(function(t){403===t.status?n.reject("Not authorized to modify this comment!"):200===t.status?n.resolve(JSON.parse(t.body)):n.reject(t.body)})),n.promise},remove:function(t){var e=i.defer();return l("DELETE",o+"/id/"+t,null,(function(t){403===t.status?e.reject("Not authorized to remove this comment!"):200===t.status?e.resolve(null===JSON.parse(t.body)):e.reject(t.body)})),e.promise},view:function(t,e){var n=i.defer();return l("GET",o+"/id/"+t+"?"+f({plain:e}),null,(function(t){n.resolve(JSON.parse(t.body))})),n.promise},fetch:function(t,e,n,r,a){void 0===e&&(e="inf"),void 0===n&&(n="inf"),void 0===r&&(r=null);var u={uri:t||s(),after:a,parent:r};"inf"!==e&&(u.limit=e),"inf"!==n&&(u.nested_limit=n);var c=i.defer();return l("GET",o+"/?"+f(u),null,(function(t){200===t.status?c.resolve(JSON.parse(t.body)):404===t.status?c.resolve({total_replies:0}):c.reject(t.body)})),c.promise},count:function(t){var e=i.defer();return l("POST",o+"/count",JSON.stringify(t),(function(t){200===t.status?e.resolve(JSON.parse(t.body)):e.reject(t.body)})),e.promise},like:function(t){var e=i.defer();return l("POST",o+"/id/"+t+"/like",null,(function(t){e.resolve(JSON.parse(t.body))})),e.promise},dislike:function(t){var e=i.defer();return l("POST",o+"/id/"+t+"/dislike",null,(function(t){e.resolve(JSON.parse(t.body))})),e.promise},feed:function(t){return o+"/feed?"+f({uri:t||s()})},preview:function(t){var e=i.defer();return l("POST",o+"/preview",JSON.stringify({text:t}),(function(t){200===t.status?e.resolve(JSON.parse(t.body).text):e.reject(t.body)})),e.promise}}},323:function(t,e,n){for(var r=n(899),o={css:!0,"css-url":null,lang:"","default-lang":"fa","reply-to-self":!1,"require-email":!1,"require-author":!1,"reply-notifications":!1,"max-comments-top":"inf","max-comments-nested":5,"reveal-on-click":5,gravatar:!1,avatar:!0,"avatar-bg":"#f0f0f0","avatar-fg":["#9abf88","#5698c4","#e279a3","#9163b6","#be5168","#f19670","#e4bf80","#447c69"].join(" "),vote:!0,"vote-levels":null,feed:!1,theme:"light"},i=document.getElementsByTagName("script"),a=0;a<i.length;a++)for(var s=0;s<i[a].attributes.length;s++){var u=i[a].attributes[s];if(/^data-nikas-/.test(u.name))try{o[u.name.substring(11)]=JSON.parse(u.value)}catch(t){o[u.name.substring(11)]=u.value}}o["avatar-fg"]=o["avatar-fg"].split(" ");var c=[],l=!1;if(o.lang&&c.push(r.normalize_bcp47(o.lang)),navigator.languages)for(a=0;a<navigator.languages.length;a++)navigator.languages[a]&&(l=!0,c.push(r.normalize_bcp47(navigator.languages[a])));!l&&navigator.language&&(l=!0,c.push(r.normalize_bcp47(navigator.language))),!l&&navigator.userLanguage&&(l=!0,c.push(r.normalize_bcp47(navigator.userLanguage))),o["default-lang"]&&c.push(r.normalize_bcp47(o["default-lang"])),c.push("fa"),o.langs=c,delete o.lang,delete o["default-lang"],t.exports=o},864:function(t,e,n){var r=n(809),o=n(924),i=n(487);t.exports=function(){var t={};o.each("a",(function(e){if(e.href.match&&e.href.match(/#nikas-thread$/)){var n=e.getAttribute("data-nikas-id")||e.href.match(/^(.+)#nikas-thread$/)[1].replace(/^.*\/\/[^\/]+/,"");n in t?t[n].push(e):t[n]=[e]}}));var e=Object.keys(t);r.count(e).then((function(n){for(var r in t)if(t.hasOwnProperty(r))for(var o=e.indexOf(r),a=0;a<t[r].length;a++)t[r][a].textContent=i.pluralize("num-comments",n[o])}))}},924:function(t){"use strict";function e(t){this.obj=t,this.replace=function(e){var n=r.htmlify(e);return t.parentNode.replaceChild(n.obj,t),n},this.prepend=function(e){var n=r.htmlify(e);return t.insertBefore(n.obj,t.firstChild),n},this.append=function(e){var n=r.htmlify(e);return t.appendChild(n.obj),n},this.insertAfter=function(e){var n=r.htmlify(e);return t.parentNode.insertBefore(n.obj,t.nextSibling),n},this.on=function(e,n,r){t.addEventListener(e,(function(t){n(t),(void 0===r||r)&&t.preventDefault()}))},this.toggle=function(t,e,r){var o=new n(e,r);this.on(t,(function(){o.next()}))},this.detach=function(){return t.parentNode.removeChild(this.obj),this},this.remove=function(){t.parentNode.removeChild(this.obj)},this.show=function(){t.style.display="block"},this.hide=function(){t.style.display="none"},this.setText=function(e){t.textContent=e},this.setHtml=function(e){t.innerHTML=e},this.blur=function(){t.blur()},this.focus=function(){t.focus()},this.scrollIntoView=function(e){t.scrollIntoView(e)},this.checked=function(){return t.checked},this.setAttribute=function(e,n){t.setAttribute(e,n)},this.getAttribute=function(e){return t.getAttribute(e)},this.classList=t.classList,Object.defineProperties(this,{textContent:{get:function(){return t.textContent},set:function(e){t.textContent=e}},innerHTML:{get:function(){return t.innerHTML},set:function(e){t.innerHTML=e}},value:{get:function(){return t.value},set:function(e){t.value=e}},placeholder:{get:function(){return t.placeholder},set:function(e){t.placeholder=e}}})}var n=function(t,e){this.state=!1,this.next=function(){this.state?(this.state=!1,e(this)):(this.state=!0,t(this))},this.wait=function(){this.state=!this.state}},r=function(t,n,r){void 0===r&&(r=!0),n||(n=window.document),n instanceof e&&(n=n.obj);var o=[].slice.call(n.querySelectorAll(t),0);return 0===o.length?null:1===o.length&&r?new e(o[0]):(o=[].slice.call(o,0)).map((function(t){return new e(t)}))};r.htmlify=function(t){if(t instanceof e)return t;if(t instanceof window.Element)return new e(t);var n=r.new("div");return n.innerHTML=t,new e(n.firstChild)},r.new=function(t,e){var n=document.createElement(t.split(".")[0]);return t.split(".").slice(1).forEach((function(t){n.classList.add(t)})),["A","LINK"].indexOf(n.nodeName)>-1&&(n.href="#"),e||0===e||(e=""),["TEXTAREA","INPUT"].indexOf(n.nodeName)>-1?n.value=e:n.textContent=e,n},r.each=function(t,e){Array.prototype.forEach.call(document.getElementsByTagName(t),e)},t.exports=r},923:function(t){"use strict";var e=function(){this.values=[]};e.prototype.update=function(t){this.values.push((new Date).getTime()-t.getTime())},e.prototype.localTime=function(){return new Date((new Date).getTime()-this.values.reduce((function(t,e){return t+e}))/this.values.length)};var n=new e;t.exports={offset:n}},487:function(t,e,n){var r,o,i,a=n(323),s={fa:n(220)};for(let t of a.langs){if(i=s[r=t],(o=function(t,e){return t[1===e?0:1]})&&i)break;if(/-/.test(r)&&(r=r.split("-",1)[0],i=s[r],(o=function(t,e){return t[1===e?0:1]})&&i))break}o&&i||(o=function(t,e){return t[1===e?0:1]},i=s[r="fa"]);var u=function(t){return a[t+"-text-"+r]||i[t]||en[t]||"[?"+t+"]"},c=function(t,e){var n;return(n=u(t)).indexOf("\n")>-1&&(n=o(n.split("\n"),+e)),n?n.replace("{{ n }}",+e):n};t.exports={ago:function(t,e){var n=(t.getTime()-e.getTime())/1e3;(isNaN(n)||n<0)&&(n=0);var r=Math.floor(n/60),o=Math.floor(r/60),i=Math.floor(o/24);return n<=45&&u("date-now")||n<=90&&c("date-minute",1)||r<=45&&c("date-minute",r)||r<=90&&c("date-hour",1)||o<=22&&c("date-hour",o)||o<=36&&c("date-day",1)||i<=5&&c("date-day",i)||i<=8&&c("date-week",1)||i<=21&&c("date-week",Math.floor(i/7))||i<=45&&c("date-month",1)||i<=345&&c("date-month",Math.floor(i/30))||i<=547&&c("date-year",1)||c("date-year",Math.floor(i/365.25))},lang:r,translate:u,pluralize:c}},220:function(t){t.exports={"postbox-text":"متن نظر را اینجا وارد کنید - حداقل ۳ حرف","postbox-author":"نام (اختیاری)","postbox-email":"آدرس ایمیل (اختیاری)","postbox-website":"آدرس وب سایت (اختیاری)","postbox-preview":"پیش نمایش","postbox-edit":"ویرایش","postbox-submit":"ثبت","postbox-notification":"اطلاع رسانی از طریق ایمیل","num-comments":"یک نظر\n{{ n }} نظر","no-comments":"هنوز نظری ثبت نشده است","atom-feed":"فید اتم","comment-reply":"پاسخ","comment-edit":"ویرایش","comment-save":"ذخیره","comment-delete":"حذف","comment-confirm":"تایید","comment-close":"بستن","comment-cancel":"لغو","comment-deleted":"نظر حذف شد","comment-queued":"در انتظار بررسی توسط مدیریت","comment-anonymous":"ناشناس","comment-hidden":"{{ n }} مخفی","date-now":"همین الان","date-minute":"یک دقیقه پیش\n{{ n }} دقیقه پیش","date-hour":"یک ساعت پیش\n{{ n }} ساعت پیش","date-day":"دیروز\n{{ n }} روز پیش","date-week":"هفته پیش\n{{ n }} هفته پیش","date-month":"ماه پیش\n{{ n }} ماه پیش","date-year":"سال پیش\n{{ n }} سال پیش"}},673:function(t){"use strict";var e=function(t){console.log(t)},n=function(){this.success=[],this.errors=[]};n.prototype.then=function(t,n){this.success.push(t),n?this.errors.push(n):this.errors.push(e)};var r=function(){this.promise=new n};r.prototype={promise:n,resolve:function(t){this.promise.success.forEach((function(e){window.setTimeout((function(){e(t)}),0)}))},reject:function(t){this.promise.errors.forEach((function(e){window.setTimeout((function(){e(t)}),0)}))}},t.exports={defer:function(){return new r},when:function(t,e){return t instanceof n?t.then(e):e(t)}}},208:function(t){"use strict";var e=!1,n=function(t){e||(e=!0,t())};t.exports=function(t){document.addEventListener("DOMContentLoaded",(function(){n(t)})),"interactive"!==document.readyState&&"complete"!==document.readyState||n(t)}},899:function(t){"use strict";var e,n,r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};try{localStorage.setItem("x","y"),localStorage.removeItem("x"),e=localStorage}catch(t){n={},e={setItem:function(t,e){n[t]=e},getItem:function(t){return void 0!==n[t]?n[t]:null},removeItem:function(t){delete n[t]}}}t.exports={cookie:function(t){return(document.cookie.match("(^|; )"+t+"=([^;]*)")||0)[2]},detext:function(t){return(t=String(t).replace(/[&<>"'\/]/g,(function(t){return r[t]}))).replace(/\n\n/gi,"<br><div><br></div>").replace(/\n/gi,"<br>")},localStorageImpl:e,normalize_bcp47:function(t){for(var e=t.toLowerCase().split(/[_-]/),n=!1,r=0;r<e.length;r++)1===e[r].length?n=!0:n||0===r?n=!1:2===e[r].length?e[r]=e[r].toUpperCase():4===e[r].length&&(e[r]=e[r].charAt(0).toUpperCase()+e[r].substr(1));return e.join("-")},pad:function(t,e,n){return n=n||"0",(t+="").length>=e?t:new Array(e-t.length+1).join(n)+t},text:function(t){var e=document.createElement("div");return e.innerHTML=t.replace(/<div><br><\/div>/gi,"<br>").replace(/<div>/gi,"<br>").replace(/<br>/gi,"\n").replace(/&nbsp;/gi," "),e.textContent.trim()}}}},r={};function o(t){var e=r[t];if(void 0!==e)return e.exports;var i=r[t]={exports:{}};return n[t](i,i.exports,o),i.exports}t=o(208),e=o(864),t((function(){e()}))}();