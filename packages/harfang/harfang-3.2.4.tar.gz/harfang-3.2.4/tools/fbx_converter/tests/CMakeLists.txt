file(WRITE
	config.h
	"// This file is generated by the build system.\n\n#pragma once\n\n#define UNIT_TEST_DATA_PATH \"${CMAKE_CURRENT_SOURCE_DIR}/data/\"\n#define FBX_CONVERTER_PATH \"${CMAKE_INSTALL_PREFIX}/fbx_converter/\"\n")

set(HDRS
	config.h)

set(SRCS
	main.cpp
	t_convert.cpp)

add_executable(fbx_converter_tests ${SRCS} ${HDRS})
target_link_libraries(fbx_converter_tests PUBLIC engine PRIVATE gtest tiny-process-library)
set_target_properties(fbx_converter_tests PROPERTIES FOLDER "harfang/tools" OUTPUT_NAME "tests")

if(WIN32)
	set_target_properties(fbx_converter_tests PROPERTIES VS_DEBUGGER_WORKING_DIRECTORY ${CMAKE_INSTALL_PREFIX}/fbx_converter)
	set_target_properties(fbx_converter_tests PROPERTIES VS_DEBUGGER_COMMAND_ARGUMENTS "-data_path ${CMAKE_CURRENT_SOURCE_DIR}/data")
endif()

install(TARGETS fbx_converter_tests RUNTIME DESTINATION fbx_converter COMPONENT fbx_converter)
