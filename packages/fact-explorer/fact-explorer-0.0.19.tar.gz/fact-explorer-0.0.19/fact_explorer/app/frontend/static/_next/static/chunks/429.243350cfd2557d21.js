"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[429],{1815:function(e,n,r){r.d(n,{Y:function(){return t}});var t={}},2429:function(e,n,r){r.r(n);var t=r(4051),o=r.n(t),a=r(9604),i=r(7673),u=r(1815);function c(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function s(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return c(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l="",f=[];function p(e){var n="fact-explorer.focusAggId",r="fact-explorer.mergeAggId";e.editor.registerCommand(n,(function(e,r){var t;u.Y.onFocusAggId?null===(t=u.Y.onFocusAggId)||void 0===t||t.call(u.Y,r.aggId):alert('Command "'.concat(n,'" is not handled correctly.'))})),e.editor.registerCommand(r,(function(e,r){var t;u.Y.onMergeAggId?null===(t=u.Y.onMergeAggId)||void 0===t||t.call(u.Y,r.aggId):alert('Command "'.concat(n,'" is not handled correctly.'))})),e.languages.registerHoverProvider("json",{provideHover:function(t,o){if("/result/search.json"===t.uri.path){var a="".concat(t.id,"-").concat(t.getVersionId());if(a!==l){var u=(0,i.Qc)(t.getValue()),c=[],p=!0,v=!1,d=void 0;try{for(var m,h=(0,i.hZ)(u,(function(e){return"enter"===e.phase}))[Symbol.iterator]();!(p=(m=h.next()).done);p=!0){var y=m.value,g=y.node;y.parent,y.phase;if("Member"===g.type&&"aggIds"===g.name.value&&"Array"===g.value.type){var b,w=g.value.elements.filter((function(e){return"String"===e.type}));(b=c).push.apply(b,s(w))}}}catch(k){v=!0,d=k}finally{try{p||null==h.return||h.return()}finally{if(v)throw d}}l=a,f=c}var x=f.find((function(e){return e.loc.start.line===o.lineNumber&&e.loc.end.line===o.lineNumber&&e.loc.start.column<=o.column&&e.loc.end.column>=o.column}));if(!x)return null;var j=encodeURIComponent(JSON.stringify({aggId:x.value}));return{range:new e.Range(x.loc.start.line,x.loc.start.column,x.loc.end.line,x.loc.end.column),contents:[{value:"[".concat("Focus","](command:").concat(n,"?").concat(j,' "').concat("Filter for this specific aggId.",'") | [').concat("Add to current filter","](command:").concat(r,"?").concat(j,' "').concat("Adds this specific aggId to the current filter.",'")'),isTrusted:!0}]}}}})}var v={},d=[],m=[];function h(e){var n=d.findIndex((function(n){return n===e}));d.splice(n,1);var r=m.shift();r&&(d.push(r),r().then((function(){h(r)})))}function y(e,n){var r=v[e];if(r)return r;if(d.length<10){d.push(n);var t=n().then((function(e){return h(n),e}));return v[e]=t,t}var o,a=new Promise((function(e){return o=e}));return m.push((function(){return n().then((function(e){return o(e),e}))})),v[e]=a,a}function g(e,n,r,t,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void r(s)}u.done?n(c):Promise.resolve(c).then(t,o)}function b(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var a=e.apply(n,r);function i(e){g(a,t,o,i,u,"next",e)}function u(e){g(a,t,o,i,u,"throw",e)}i(void 0)}))}}function w(e){return x.apply(this,arguments)}function x(){return(x=b(o().mark((function e(n){var r,t,a,i,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r="/api/registry/namespaces?with-types=true",e.next=4,y(r,(function(){return fetch(r)}));case 4:if((t=e.sent).ok){e.next=9;break}return e.next=8,t.clone().json();case 8:throw e.sent;case 9:return e.next=11,t.clone().json();case 11:a=e.sent,i=Object.keys(a),u=[],i.forEach((function(e){var n=a[e];n.types.forEach((function(r){u.push({type:"object",properties:{ns:{description:n.title,enum:[e]},type:{enum:[r.name]},version:{enum:[r.version]}}})}))})),n.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,trailingCommas:"ignore",allowComments:!0,schemas:[{uri:"http://fact-explorer/header-schema.json",fileMatch:["header.json"],schema:{type:"object",properties:{id:{type:"string"},aggIds:{type:"array",items:{type:"string"}},ns:{enum:i},type:{type:"string"},version:{type:"integer"}},anyOf:u}}]}),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),console.error("Could not fetch namespaces with types from registry."),console.error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}function j(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function k(e,n,r,t,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void r(s)}u.done?n(c):Promise.resolve(c).then(t,o)}function O(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var a=e.apply(n,r);function i(e){k(a,t,o,i,u,"next",e)}function u(e){k(a,t,o,i,u,"throw",e)}i(void 0)}))}}function I(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,a=[],i=!0,u=!1;try{for(r=r.call(e);!(i=(t=r.next()).done)&&(a.push(t.value),!n||a.length!==n);i=!0);}catch(c){u=!0,o=c}finally{try{i||null==r.return||r.return()}finally{if(u)throw o}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return j(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var A="",P=[],S={};function C(e){e.languages.registerHoverProvider("json",{provideHover:function(n,r){if(n.uri.path.startsWith("/result/")){var t="".concat(n.id,"-").concat(n.getVersionId());if(t!==A){var o=(0,i.Qc)(n.getValue()),a=[],u=!0,c=!1,s=void 0;try{for(var l,f=(0,i.hZ)(o,(function(e){return"enter"===e.phase}))[Symbol.iterator]();!(u=(l=f.next()).done);u=!0){var p=l.value,v=p.node;p.parent,p.phase;if("Object"===v.type&&2===v.members.length&&"header"===v.members[0].name.value&&"payload"===v.members[1].name.value){var d=I(v.members,2),m=d[0],h=d[1],y=m.value.members.find((function(e){return"ns"===e.name.value})).value.value,g=m.value.members.find((function(e){return"type"===e.name.value})).value.value,b=m.value.members.find((function(e){return"version"===e.name.value})).value.value;a.push({node:h,ns:y,type:g,version:b})}}}catch(x){c=!0,s=x}finally{try{u||null==f.return||f.return()}finally{if(c)throw s}}A=t,P=a}var w=P.find((function(e){var n=e.node;return(n.loc.start.line<r.lineNumber||n.loc.start.line===r.lineNumber&&n.loc.start.column<=r.column)&&(n.loc.end.line>r.lineNumber||n.loc.end.line===r.lineNumber&&n.loc.end.column>=r.column)}));return w?function(e){return E.apply(this,arguments)}(w).then((function(n){return{range:new e.Range(r.lineNumber,r.column,r.lineNumber,r.column),contents:[{value:n,isTrusted:!0}]}})).catch((function(e){return console.error("Could not fetch schema from registry."),console.error(e),null})):null}}})}function E(){return(E=O(o().mark((function e(n){var r,t,a,i,u,c,s,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=function(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=null!==(n=e.description)&&void 0!==n?n:e.title;0===r&&t&&(l+=t+"\n\n");var o=e.properties||e.items.properties;o&&Object.keys(o).forEach((function(n){var t,a,i,u=o[n],c=null===(t=e.required)||void 0===t?void 0:t.find((function(e){return e===n}));l+=(0!==r?" ".repeat(2*r)+"- ":"- ")+"**"+n+"**"+(c?" _(required)_":"")+": `{".concat(u.type,"}` ").concat(null!==(i=null!==(a=u.description)&&void 0!==a?a:u.title)&&void 0!==i?i:"_no description_","\n\n"),"object"===u.type&&f(u,r+1),"array"===u.type&&f(u,r+1)}))},r=n.ns,t=n.type,a=n.version,i="namespace=".concat(r,"&type=").concat(t,"&version=").concat(a),!S[i]){e.next=5;break}return e.abrupt("return",S[i]);case 5:return u="/api/registry/schema?".concat(i),e.next=8,y(u,(function(){return fetch(u)}));case 8:if((c=e.sent).ok){e.next=13;break}return e.next=12,c.clone().json();case 12:throw e.sent;case 13:return e.next=15,c.clone().json();case 15:return s=e.sent,l="",f(s),S[i]=l,e.abrupt("return",l);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=r(7563);function _(e,n,r,t,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void r(s)}u.done?n(c):Promise.resolve(c).then(t,o)}function R(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var a=e.apply(n,r);function i(e){_(a,t,o,i,u,"next",e)}function u(e){_(a,t,o,i,u,"throw",e)}i(void 0)}))}}function F(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function L(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){F(e,n,r[n])}))}return e}function M(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var T="",V=[],Y={};function H(e,n){e.languages.registerCodeLensProvider("json",{provideCodeLenses:function(r,t){return R(o().mark((function t(){var a,u,c,s,l,f,p,v,d,m,h,y;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.uri.path.startsWith("/result/")){t.next=2;break}return t.abrupt("return");case 2:if((a="".concat(r.id,"-").concat(r.getVersionId()))===T){t.next=25;break}for(u=(0,i.Qc)(r.getValue()),c=[],s=!0,l=!1,f=void 0,t.prev=7,p=(0,i.hZ)(u,(function(e){return"enter"===e.phase}))[Symbol.iterator]();!(s=(v=p.next()).done);s=!0)d=v.value,m=d.node,h=d.parent,d.phase,n.forEach((function(e){if("String"===m.type&&e.fields.some((function(e){return"string"===typeof e?e===m.value:m.value.match(e)}))&&"Member"===h.type&&"String"===h.value.type){var n=h.value.value;c.push({node:m,id:n,config:e})}}));t.next=15;break;case 11:t.prev=11,t.t0=t.catch(7),l=!0,f=t.t0;case 15:t.prev=15,t.prev=16,s||null==p.return||p.return();case 18:if(t.prev=18,!l){t.next=21;break}throw f;case 21:return t.finish(18);case 22:return t.finish(15);case 23:T=a,V=c;case 25:return t.next=27,Promise.all(V.map(function(){var n=R(o().mark((function n(r){var t;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Z(r.id,r.config);case 2:if(t=n.sent){n.next=5;break}return n.abrupt("return",null);case 5:return n.abrupt("return",{range:new e.Range(r.node.loc.start.line,r.node.loc.start.column,r.node.loc.end.line,r.node.loc.end.column),command:{id:"",title:t}});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()));case 27:return y=t.sent.filter((function(e){return!!e})),t.abrupt("return",{lenses:y,dispose:function(){}});case 29:case"end":return t.stop()}}),t,null,[[7,11,15,23],[16,,18,22]])})))()}})}function Z(e,n){return q.apply(this,arguments)}function q(){return(q=R(o().mark((function e(n,r){var t,a,i,u,c,s,l,f,p,v,d,m,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y[n]){e.next=2;break}return e.abrupt("return",Y[n]);case 2:t=!0,a=!1,i=void 0,e.prev=3,u=r.events[Symbol.iterator]();case 5:if(t=(c=u.next()).done){e.next=28;break}return s=c.value,(l=s).value,f=M(l,["value"]),p=N.stringify({hq:JSON.stringify(L({},f,{aggIds:[n]})),pq:JSON.stringify({}),skip:0,limit:1,decrypt:!0}),v="/api/search?".concat(p),e.next=13,y(v,(function(){return fetch(v)}));case 13:if((d=e.sent).ok){e.next=18;break}return e.next=17,d.clone().json();case 17:throw e.sent;case 18:return e.next=20,d.clone().json();case 20:if(!(m=e.sent).length){e.next=25;break}return h=l.value(m[0].payload),Y[n]=h,e.abrupt("return",h);case 25:t=!0,e.next=5;break;case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(3),a=!0,i=e.t0;case 34:e.prev=34,e.prev=35,t||null==u.return||u.return();case 37:if(e.prev=37,!a){e.next=40;break}throw i;case 40:return e.finish(37);case 41:return e.finish(34);case 42:return e.abrupt("return",null);case 43:case"end":return e.stop()}}),e,null,[[3,30,34,42],[35,,37,41]])})))).apply(this,arguments)}var D=r(3186),Q="",X=[];function J(e){e.languages.registerCodeLensProvider("json",{provideCodeLenses:function(n,r){if(n.uri.path.startsWith("/result/")){var t="".concat(n.id,"-").concat(n.getVersionId());if(t!==Q){var o=(0,i.Qc)(n.getValue()),a=[],u=!0,c=!1,s=void 0;try{for(var l,f=(0,i.hZ)(o,(function(e){return"enter"===e.phase}))[Symbol.iterator]();!(u=(l=f.next()).done);u=!0){var p=l.value,v=p.node;p.parent,p.phase;"Member"===v.type&&"_ts"===v.name.value&&"Number"===v.value.type&&a.push({node:v,title:(0,D.Z)(v.value.value)})}}catch(d){c=!0,s=d}finally{try{u||null==f.return||f.return()}finally{if(c)throw s}}Q=t,X=a}return{lenses:X.map((function(n){return{range:new e.Range(n.node.loc.start.line,n.node.loc.start.column,n.node.loc.end.line,n.node.loc.end.column),command:{id:"",title:n.title}}})),dispose:function(){}}}},resolveCodeLens:function(e,n,r){return n}})}function U(e,n,r,t,o,a,i){try{var u=e[a](i),c=u.value}catch(s){return void r(s)}u.done?n(c):Promise.resolve(c).then(t,o)}a._m.init().then(function(){var e,n=(e=o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.FACT_EXPLORER.disableCodeCompletionForHeader||w(n),J(n),p(n),window.FACT_EXPLORER.disableDocumentationForPayload||C(n),window.FACT_EXPLORER.eventFieldLens&&H(n,window.FACT_EXPLORER.eventFieldLens);case 5:case"end":return e.stop()}}),e)})),function(){var n=this,r=arguments;return new Promise((function(t,o){var a=e.apply(n,r);function i(e){U(a,t,o,i,u,"next",e)}function u(e){U(a,t,o,i,u,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}())}}]);