(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{881:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return t(1644)}])},2569:function(e,r,t){"use strict";t.d(r,{l:function(){return a}});var n=t(5893),a=function(e){var r=e.children,t=e.onSubmit;return(0,n.jsx)("form",{className:"grid gap-2 p-5",onSubmit:t,noValidate:!0,children:r})}},1656:function(e,r,t){"use strict";t.d(r,{_:function(){return a}});var n=t(5893),a=function(e){var r=e.children,t=e.htmlFor,a=e.onClick;return(0,n.jsx)("label",{htmlFor:t,onClick:a,className:"block font-medium text-gray-700",children:r})}},5146:function(e,r,t){"use strict";t.d(r,{x:function(){return x}});var n=t(5893),a=t(9604),s=t(7294),o=t(7361),l=t.n(o),i=t(4908),u=t.n(i),c=t(1163),d=t(9158);function f(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function p(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function m(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){p(e,r,t[r])}))}return e}function h(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return f(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return f(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b=t(7446),g={tableView:!1,foldLevel:"4",columns:["header.meta._ser","header.ns","header.type"]},x=function(e){var r=e.request,t=e.path,a=(0,d.U)(g),o=(0,c.useRouter)(),l=(0,s.useState)(null),i=l[0],f=l[1],p=(0,s.useState)(a.tableView),x=p[0],j=p[1],v=(0,s.useState)(a.foldLevel),w=v[0],N=v[1],S=(0,s.useState)(a.columns),k=S[0],R=S[1],O=(0,s.useMemo)((function(){if(!r.data)return[];var e=r.data.map((function(e){return new b(e).paths()})).flat();return u()(e.concat(a.columns)).sort()}),[r.data]);return(0,s.useEffect)((function(){i&&(i.trigger("unfold","editor.unfoldAll",{}),"unfold"!==w&&("1"===w?i.trigger("fold","editor.foldAll",{}):i.trigger("fold","editor.foldLevel".concat(w),{})))}),[w,i]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"p-4 flex gap-5",children:[(0,n.jsxs)("label",{className:"text-xs flex gap-1 items-start",children:[(0,n.jsx)("span",{children:"Table View:"}),(0,n.jsx)("div",{children:(0,n.jsx)("input",{type:"checkbox",className:"h-5 w-5 focus:ring-blue-500 focus:border-blue-500 shadow-sm border border-gray-300 rounded-md appearance-none checked:bg-blue-500 checked:after:content-['\u2713'] checked:after:grid checked:after:text-white checked:after:text-center",onChange:function(e){j(!x),o.replace({query:m({},o.query,{tableView:!x})},void 0,{scroll:!1})},checked:x})})]}),!x&&(0,n.jsxs)("label",{className:"text-xs flex gap-1 items-start",children:[(0,n.jsx)("span",{children:"Folding:"}),(0,n.jsxs)("select",{className:"focus:ring-blue-500 focus:border-blue-500 shadow-sm border border-gray-300 rounded-md p-0.5 text-xs disabled:bg-gray-200 disabled:cursor-not-allowed",onChange:function(e){var r=e.currentTarget.value;N(r),o.replace({query:m({},o.query,{foldLevel:r})},void 0,{scroll:!1})},value:w,children:[(0,n.jsx)("option",{value:"1",children:"1"}),(0,n.jsx)("option",{value:"2",children:"2"}),(0,n.jsx)("option",{value:"3",children:"3"}),(0,n.jsx)("option",{value:"4",children:"4"}),(0,n.jsx)("option",{value:"5",children:"5"}),(0,n.jsx)("option",{value:"6",children:"6"}),(0,n.jsx)("option",{value:"7",children:"7"}),(0,n.jsx)("option",{value:"unfold",children:"Unfold All"})]})]}),x&&(0,n.jsxs)("label",{className:"text-xs flex gap-1 items-start",children:[(0,n.jsx)("span",{children:"Columns:"}),(0,n.jsx)("select",{className:"w-100 focus:ring-blue-500 focus:border-blue-500 shadow-sm border border-gray-300 rounded-md p-0.5 text-xs disabled:bg-gray-200 disabled:cursor-not-allowed",onChange:function(e){var r=e.currentTarget.value,t=k.findIndex((function(e){return e===r})),n=t>-1?h(k.slice(0,t)).concat(h(k.slice(t+1))):h(k).concat([r]).sort();R(n),o.replace({query:m({},o.query,{columns:n})},void 0,{scroll:!1})},value:k,multiple:!0,disabled:!r.data,children:r.data?O.map((function(e){return(0,n.jsx)("option",{value:e,className:"p-1",children:e},e)})):(0,n.jsx)("option",{children:"Loading..."})})]})]}),r.loading?(0,n.jsxs)("div",{className:"p-5 shadow-inner",children:[(0,n.jsx)("span",{className:"inline-block animate-spin",children:"\u21bb"})," Loading..."]}):r.data?(0,n.jsx)(y,{data:r.data,path:t,setEditor:f,tableView:x,columns:k}):null]})},y=function(e){var r=e.data,t=e.path,o=e.setEditor,l=e.tableView,i=e.columns,u=(0,s.useMemo)((function(){return r.length?JSON.stringify(r,null,2):null}),[r]);return u?(0,n.jsx)(n.Fragment,{children:l?(0,n.jsx)(j,{data:r,columns:i}):(0,n.jsx)(a.ZP,{path:t,height:600,defaultLanguage:"json",value:u,options:{scrollBeyondLastLine:!1,readOnly:!0,minimap:{enabled:!1},unusualLineTerminators:"auto"},onMount:function(e,r){o(e);var t=e.getContribution("editor.contrib.messageController");e.onDidAttemptReadOnlyEdit((function(){return t.dispose()}))}})}):(0,n.jsx)("div",{className:"p-5 shadow-inner",children:(0,n.jsx)("p",{children:"No result."})})},j=(0,s.memo)((function(e){var r=e.data,t=e.columns;return(0,n.jsxs)("table",{className:"w-full text-gray-700",style:{tableLayout:"fixed"},children:[(0,n.jsx)("thead",{children:(0,n.jsx)("tr",{className:"text-xs text-left bg-gray-200",children:t.map((function(e){return(0,n.jsx)("th",{className:"py-1 px-3",children:e},e)}))})}),(0,n.jsx)("tbody",{children:r.map((function(e,r){return(0,n.jsx)(v,{data:e,index:r,columns:t},e.header.id)}))})]})}));j.displayName="Table";var v=function(e){var r=e.data,t=e.index,a=e.columns;return(0,n.jsx)("tr",{className:"text-sm ".concat(t%2?"bg-gray-100":""," align-top"),children:a.map((function(e){var t=l()(r,e);return(0,n.jsx)("td",{className:"py-1 px-3",children:void 0===t?(0,n.jsx)("em",{children:"empty"}):null===t?(0,n.jsx)("code",{children:"null"}):"object"===typeof t?(0,n.jsx)("pre",{style:{whiteSpace:"pre-wrap"},children:(0,n.jsx)("code",{children:JSON.stringify(t,null,2)})}):t},e)}))})}},9158:function(e,r,t){"use strict";t.d(r,{U:function(){return o}});var n=t(1163),a=t(7563),s=t(7294);function o(e){var r=(0,s.useState)((function(){return Object.keys(e)}))[0],t=(0,n.useRouter)(),o=(0,s.useMemo)((function(){return a.pick(t.asPath,r).split("?")[1]}),[r,t.asPath]);return(0,s.useMemo)((function(){var r=a.parse(o,{parseBooleans:!0,parseNumbers:!0}),t={};return Object.keys(e).forEach((function(n){var a;t[n]=null!==(a=r[n])&&void 0!==a?a:e[n]})),t}),[o])}},6969:function(e,r,t){"use strict";t.d(r,{q:function(){return a}});var n=t(7294);function a(){var e=(0,n.useState)(""),r=e[0],t=e[1];return{props:(0,n.useMemo)((function(){return{type:"submit",className:"".concat(r," border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-700 hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 p-2"),onAnimationEnd:function(){return t("")}}}),[r]),onError:(0,n.useCallback)((function(){return t("animate-wiggle")}),[])}}},1644:function(e,r,t){"use strict";t.r(r);var n=t(5893),a=t(5496),s=t(9604),o=t(9008),l=t(1163),i=t(7294),u=t(7536),c=t(4231),d=t(7563),f=t(6616),p=t(2569),m=t(1656),h=t(5146),b=t(2354),g=t(4937),x=t(9158),y=t(6969),j=t(1815),v=t(4602);function w(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function N(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function S(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){N(e,r,t[r])}))}return e}function k(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return w(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return w(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var R=c.Ry({header:c.Z_().defined(),payload:c.Z_().defined(),skipResults:c.Rx().transform((function(e,r){return""===r?void 0:e})).typeError("Results to Skip must be a number").required().integer().min(0),maxResults:c.Rx().transform((function(e,r){return""===r?void 0:e})).typeError("Max. Results must be a number").required().integer().min(1).max(1e3),decrypt:c.O7().defined()}).required(),O={header:"{}",payload:"{}",skipResults:0,maxResults:20,decrypt:!1};function A(e){var r=e.label,t=e.control,a=e.name,o=(0,i.useState)(null),c=o[0],d=o[1],f=(0,l.useRouter)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m._,{onClick:function(){return null===c||void 0===c?void 0:c.focus()},children:r}),(0,n.jsx)(u.Qr,{render:function(e){var r,t=e.field,o=(null!==(r=t.value.match(/\n/g))&&void 0!==r?r:[]).length+1,l=18*(f.isReady?o:1)+10;return(0,n.jsx)("div",{className:"focus:ring-blue-500 focus:border-blue-500 w-full shadow-sm border border-gray-300 rounded-md p-1",style:{height:l},children:(0,n.jsx)(s.ZP,{loading:(0,n.jsx)("p",{className:"w-full",style:{paddingLeft:"26px"},children:"Loading..."}),path:"".concat(a,".json"),defaultLanguage:"json",value:t.value,onChange:function(e){t.onChange({target:{value:null!==e&&void 0!==e?e:""}})},options:{lineNumbers:"off",scrollBeyondLastLine:!1,minimap:{enabled:!1},overviewRulerLanes:0,renderLineHighlight:"none"},onMount:function(e,r){d(e)}})})},control:t,name:a})]})}r.default=function(){var e=function(e){var r=d.stringify({hq:e.header,pq:e.payload,skip:e.skipResults,limit:e.maxResults,decrypt:e.decrypt});L.execute("/api/search?".concat(r),{headers:{Accept:"application/json"}})},r=(0,x.U)(O);(0,i.useEffect)((function(){e(r)}),[r]);var t=(0,u.cI)({resolver:(0,a.X)(R),defaultValues:r}),s=t.register,c=t.handleSubmit,w=t.formState.errors,N=t.control,E=t.setValue,_=t.getValues,L=(0,g.i)(),q=(0,g.i)(),I=(0,y.q)(),P=(0,l.useRouter)(),C=c((function(r){(0,v.Q)(P.query,r)?e(r):P.push({pathname:"/search",query:r},void 0,{scroll:!1})}),(function(e){I.onError()}));(0,i.useEffect)((function(){return j.Y.onFocusAggId=function(e){E("payload","{}"),E("header",JSON.stringify({aggIds:[e]},null,2)),C()},function(){delete j.Y.onFocusAggId}}),[]),(0,i.useEffect)((function(){return j.Y.onMergeAggId=function(e){E("payload","{}");var r=JSON.parse(_("header")),t="object"===typeof r&&null!==r&&!Array.isArray(r);E("header",JSON.stringify(t?S({},r,{aggIds:Array.isArray(r.aggIds)?k(r.aggIds).concat([e]):[e]}):{aggIds:["${aggId}"]},null,2)),C()},function(){delete j.Y.onMergeAggId}}),[]),(0,i.useEffect)((function(){q.execute("/api/features",{headers:{Accept:"application/json"}})}),[]);var M={paddingLeft:"26px"},F={height:"28px"};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.default,{children:(0,n.jsx)("title",{children:"Search"})}),(0,n.jsx)(b.D,{children:"Search"}),(0,n.jsxs)(f.Z,{children:[(0,n.jsxs)(p.l,{onSubmit:C,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(A,{label:"Header Query",control:N,name:"header"}),w.header&&(0,n.jsxs)("p",{className:"text-sm text-red-500",children:["\u26a0 ",w.header.message]})]}),!q.data||q.data.payload_queries||q.loading?(0,n.jsxs)("div",{children:[(0,n.jsx)(A,{label:"Payload Query",control:N,name:"payload"}),w.payload&&(0,n.jsxs)("p",{className:"text-sm text-red-500",children:["\u26a0 ",w.payload.message]})]}):(0,n.jsxs)("div",{children:[(0,n.jsx)(m._,{children:"Payload Query"}),(0,n.jsx)("input",{style:S({},F,M),type:"text",className:"cursor-not-allowed disabled:bg-slate-50 disabled:text-slate-500 disabled:border-slate-200 disabled:shadow-none bg-gray-100 focus:ring-blue-500 focus:border-blue-500 w-full shadow-sm border border-gray-300 rounded-md p-1",defaultValue:"Payload Queries have been disabled for this instance of Fact Explorer.",disabled:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(m._,{htmlFor:"skipResults",children:"Number of Results to Skip"}),(0,n.jsx)("input",S({style:S({},F,M),id:"skipResults",type:"number",className:" focus:ring-blue-500 focus:border-blue-500 w-full shadow-sm border border-gray-300 rounded-md p-1"},s("skipResults"))),w.skipResults&&(0,n.jsxs)("p",{className:"text-sm text-red-500",children:["\u26a0 ",w.skipResults.message]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(m._,{htmlFor:"maxResults",children:"Max. Results to Return"}),(0,n.jsx)("input",S({id:"maxResults",type:"number",style:S({},F,M),className:" focus:ring-blue-500 focus:border-blue-500 w-full shadow-sm border border-gray-300 rounded-md p-1"},s("maxResults"))),w.maxResults&&(0,n.jsxs)("p",{className:"text-sm text-red-500",children:["\u26a0 ",w.maxResults.message]})]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("input",S({type:"checkbox"},s("decrypt")))," Decrypt Result"]}),(0,n.jsx)("div",{className:"text-right",children:(0,n.jsx)("button",S({},I.props,{children:"Get Events"}))})]}),P.isReady&&(0,n.jsx)(h.x,{request:L,path:"result/search.json"})]})]})}},1815:function(e,r,t){"use strict";t.d(r,{Y:function(){return n}});var n={}},4602:function(e,r,t){"use strict";function n(e,r){for(var t in r){var n=r[t];if(!("string"===typeof n?n===e[t]:String(n)===e[t]))return!1}return!0}t.d(r,{Q:function(){return n}})}},function(e){e.O(0,[662,626,742,774,888,179],(function(){return r=881,e(e.s=r);var r}));var r=e.O();_N_E=r}]);