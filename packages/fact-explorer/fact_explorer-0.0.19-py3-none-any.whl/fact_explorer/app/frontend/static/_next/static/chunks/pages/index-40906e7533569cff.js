(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(441)}])},2569:function(e,t,n){"use strict";n.d(t,{l:function(){return a}});var r=n(5893),a=function(e){var t=e.children,n=e.onSubmit;return(0,r.jsx)("form",{className:"grid gap-2 p-5",onSubmit:n,noValidate:!0,children:t})}},1656:function(e,t,n){"use strict";n.d(t,{_:function(){return a}});var r=n(5893),a=function(e){var t=e.children,n=e.htmlFor,a=e.onClick;return(0,r.jsx)("label",{htmlFor:n,onClick:a,className:"block font-medium text-gray-700",children:t})}},5146:function(e,t,n){"use strict";n.d(t,{x:function(){return g}});var r=n(5893),a=n(9604),o=n(7294),s=n(7361),i=n.n(s),u=n(4908),l=n.n(u),c=n(1163),d=n(9158);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){m(e,t,n[t])}))}return e}function h(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b=n(7446),x={tableView:!1,foldLevel:"4",columns:["header.meta._ser","header.ns","header.type"]},g=function(e){var t=e.request,n=e.path,a=(0,d.U)(x),s=(0,c.useRouter)(),i=(0,o.useState)(null),u=i[0],f=i[1],m=(0,o.useState)(a.tableView),g=m[0],j=m[1],v=(0,o.useState)(a.foldLevel),w=v[0],N=v[1],O=(0,o.useState)(a.columns),S=O[0],k=O[1],E=(0,o.useMemo)((function(){if(!t.data)return[];var e=t.data.map((function(e){return new b(e).paths()})).flat();return l()(e.concat(a.columns)).sort()}),[t.data]);return(0,o.useEffect)((function(){u&&(u.trigger("unfold","editor.unfoldAll",{}),"unfold"!==w&&("1"===w?u.trigger("fold","editor.foldAll",{}):u.trigger("fold","editor.foldLevel".concat(w),{})))}),[w,u]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"p-4 flex gap-5",children:[(0,r.jsxs)("label",{className:"text-xs flex gap-1 items-start",children:[(0,r.jsx)("span",{children:"Table View:"}),(0,r.jsx)("div",{children:(0,r.jsx)("input",{type:"checkbox",className:"h-5 w-5 focus:ring-blue-500 focus:border-blue-500 shadow-sm border border-gray-300 rounded-md appearance-none checked:bg-blue-500 checked:after:content-['\u2713'] checked:after:grid checked:after:text-white checked:after:text-center",onChange:function(e){j(!g),s.replace({query:p({},s.query,{tableView:!g})},void 0,{scroll:!1})},checked:g})})]}),!g&&(0,r.jsxs)("label",{className:"text-xs flex gap-1 items-start",children:[(0,r.jsx)("span",{children:"Folding:"}),(0,r.jsxs)("select",{className:"focus:ring-blue-500 focus:border-blue-500 shadow-sm border border-gray-300 rounded-md p-0.5 text-xs disabled:bg-gray-200 disabled:cursor-not-allowed",onChange:function(e){var t=e.currentTarget.value;N(t),s.replace({query:p({},s.query,{foldLevel:t})},void 0,{scroll:!1})},value:w,children:[(0,r.jsx)("option",{value:"1",children:"1"}),(0,r.jsx)("option",{value:"2",children:"2"}),(0,r.jsx)("option",{value:"3",children:"3"}),(0,r.jsx)("option",{value:"4",children:"4"}),(0,r.jsx)("option",{value:"5",children:"5"}),(0,r.jsx)("option",{value:"6",children:"6"}),(0,r.jsx)("option",{value:"7",children:"7"}),(0,r.jsx)("option",{value:"unfold",children:"Unfold All"})]})]}),g&&(0,r.jsxs)("label",{className:"text-xs flex gap-1 items-start",children:[(0,r.jsx)("span",{children:"Columns:"}),(0,r.jsx)("select",{className:"w-100 focus:ring-blue-500 focus:border-blue-500 shadow-sm border border-gray-300 rounded-md p-0.5 text-xs disabled:bg-gray-200 disabled:cursor-not-allowed",onChange:function(e){var t=e.currentTarget.value,n=S.findIndex((function(e){return e===t})),r=n>-1?h(S.slice(0,n)).concat(h(S.slice(n+1))):h(S).concat([t]).sort();k(r),s.replace({query:p({},s.query,{columns:r})},void 0,{scroll:!1})},value:S,multiple:!0,disabled:!t.data,children:t.data?E.map((function(e){return(0,r.jsx)("option",{value:e,className:"p-1",children:e},e)})):(0,r.jsx)("option",{children:"Loading..."})})]})]}),t.loading?(0,r.jsxs)("div",{className:"p-5 shadow-inner",children:[(0,r.jsx)("span",{className:"inline-block animate-spin",children:"\u21bb"})," Loading..."]}):t.data?(0,r.jsx)(y,{data:t.data,path:n,setEditor:f,tableView:g,columns:S}):null]})},y=function(e){var t=e.data,n=e.path,s=e.setEditor,i=e.tableView,u=e.columns,l=(0,o.useMemo)((function(){return t.length?JSON.stringify(t,null,2):null}),[t]);return l?(0,r.jsx)(r.Fragment,{children:i?(0,r.jsx)(j,{data:t,columns:u}):(0,r.jsx)(a.ZP,{path:n,height:600,defaultLanguage:"json",value:l,options:{scrollBeyondLastLine:!1,readOnly:!0,minimap:{enabled:!1},unusualLineTerminators:"auto"},onMount:function(e,t){s(e);var n=e.getContribution("editor.contrib.messageController");e.onDidAttemptReadOnlyEdit((function(){return n.dispose()}))}})}):(0,r.jsx)("div",{className:"p-5 shadow-inner",children:(0,r.jsx)("p",{children:"No result."})})},j=(0,o.memo)((function(e){var t=e.data,n=e.columns;return(0,r.jsxs)("table",{className:"w-full text-gray-700",style:{tableLayout:"fixed"},children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{className:"text-xs text-left bg-gray-200",children:n.map((function(e){return(0,r.jsx)("th",{className:"py-1 px-3",children:e},e)}))})}),(0,r.jsx)("tbody",{children:t.map((function(e,t){return(0,r.jsx)(v,{data:e,index:t,columns:n},e.header.id)}))})]})}));j.displayName="Table";var v=function(e){var t=e.data,n=e.index,a=e.columns;return(0,r.jsx)("tr",{className:"text-sm ".concat(n%2?"bg-gray-100":""," align-top"),children:a.map((function(e){var n=i()(t,e);return(0,r.jsx)("td",{className:"py-1 px-3",children:void 0===n?(0,r.jsx)("em",{children:"empty"}):null===n?(0,r.jsx)("code",{children:"null"}):"object"===typeof n?(0,r.jsx)("pre",{style:{whiteSpace:"pre-wrap"},children:(0,r.jsx)("code",{children:JSON.stringify(n,null,2)})}):n},e)}))})}},9158:function(e,t,n){"use strict";n.d(t,{U:function(){return s}});var r=n(1163),a=n(7563),o=n(7294);function s(e){var t=(0,o.useState)((function(){return Object.keys(e)}))[0],n=(0,r.useRouter)(),s=(0,o.useMemo)((function(){return a.pick(n.asPath,t).split("?")[1]}),[t,n.asPath]);return(0,o.useMemo)((function(){var t=a.parse(s,{parseBooleans:!0,parseNumbers:!0}),n={};return Object.keys(e).forEach((function(r){var a;n[r]=null!==(a=t[r])&&void 0!==a?a:e[r]})),n}),[s])}},6969:function(e,t,n){"use strict";n.d(t,{q:function(){return a}});var r=n(7294);function a(){var e=(0,r.useState)(""),t=e[0],n=e[1];return{props:(0,r.useMemo)((function(){return{type:"submit",className:"".concat(t," border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-700 hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 p-2"),onAnimationEnd:function(){return n("")}}}),[t]),onError:(0,r.useCallback)((function(){return n("animate-wiggle")}),[])}}},441:function(e,t,n){"use strict";n.r(t);var r=n(5893),a=n(5496),o=n(9008),s=n(1163),i=n(7563),u=n(7294),l=n(7536),c=n(4231),d=n(6616),f=n(2569),m=n(1656),p=n(5146),h=n(2354),b=n(4937),x=n(9158),g=n(6969),y=n(4602);function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){j(e,t,n[t])}))}return e}var w=c.Ry({minutes:c.Rx().transform((function(e,t){return""===t?void 0:e})).typeError("minutes must be a number").required().integer().min(1).max(60),decrypt:c.O7().defined()}).required(),N={minutes:15,decrypt:!1};t.default=function(){var e=function(e){var t=i.stringify({minutes:e.minutes,decrypt:e.decrypt});S.execute("/api/last?".concat(t),{headers:{Accept:"application/json"}})},t=(0,x.U)(N);(0,u.useEffect)((function(){e(t)}),[t]);var n=(0,l.cI)({resolver:(0,a.X)(w),defaultValues:t}),c=n.register,j=n.handleSubmit,O=n.formState.errors,S=(0,b.i)(),k=(0,g.q)(),E=(0,s.useRouter)(),_=j((function(t){(0,y.Q)(E.query,t)?e(t):E.push({pathname:"/",query:t},void 0,{scroll:!1})}),(function(e){k.onError()}));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.default,{children:(0,r.jsx)("title",{children:"Last Minutes"})}),(0,r.jsx)(h.D,{children:"Retrieve Events from Last Minutes"}),(0,r.jsxs)(d.Z,{children:[(0,r.jsxs)(f.l,{onSubmit:_,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m._,{htmlFor:"minutes",children:"Minutes"}),(0,r.jsx)("input",v({id:"minutes",type:"number",style:v({},{height:"28px"},{paddingLeft:"26px"}),className:"focus:ring-blue-500 focus:border-blue-500 w-full shadow-sm border border-gray-300 rounded-md p-1"},c("minutes"))),O.minutes&&(0,r.jsxs)("p",{className:"text-sm text-red-500",children:["\u26a0 ",O.minutes.message]})]}),(0,r.jsxs)("label",{children:[(0,r.jsx)("input",v({type:"checkbox"},c("decrypt")))," Decrypt Result"]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsx)("button",v({},k.props,{children:"Get Events"}))})]}),E.isReady&&(0,r.jsx)(p.x,{request:S,path:"result/last-minutes.json"})]})]})}},4602:function(e,t,n){"use strict";function r(e,t){for(var n in t){var r=t[n];if(!("string"===typeof r?r===e[n]:String(r)===e[n]))return!1}return!0}n.d(t,{Q:function(){return r}})}},function(e){e.O(0,[662,626,742,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);