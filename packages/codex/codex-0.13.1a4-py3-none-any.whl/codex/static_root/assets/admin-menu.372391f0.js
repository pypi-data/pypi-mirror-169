import{aQ as p,n as _,j as s,k as r,a as o,v,_ as m,aq as f,l,aR as b,m as h}from"./button.cfc1ac42.js";import{i as k,j as i,l as c,n as u,o as A,p as I,h as S}from"./main.78b57f97.js";import{_ as d}from"./VListItemGroup.1c28871f.js";const T={name:"AdminStatusList",data(){return{mdiCloseCircleOutline:p}},computed:{...k(i,{librarianStatuses:t=>t.librarianStatuses,show:t=>t.librarianStatuses.length>0})},created(){this.load()},methods:{...c(i,["loadTable","librarianTask"]),computeValue:function(t){return t.preactive||+t.total==0?0:100*+t.complete/+t.total},load(){this.loadTable("LibrarianStatus")},clear(){this.librarianTask("librarian_clear_status","")}}};var g=function(){var e=this,n=e._self._c;return n(d,[e.show?n(_):e._e(),n(s,{attrs:{ripple:""},on:{click:e.load}},[n(r,[n(o,[e.show?n("div",[n(v,{attrs:{id:"clearButton",small:"",ripple:"",icon:"",title:"Clear Librarian Statuses"},on:{click:e.clear}},[n(m,[e._v(e._s(e.mdiCloseCircleOutline))])],1),n("h4",[e._v("Librarian Tasks")]),e._l(e.librarianStatuses,function(a){return n(o,{key:`${a.type} ${a.name}`},[n("div",{staticClass:"statusItem",attrs:{nav:""}},[n("div",{staticClass:"statusItemTitle"},[e._v(" "+e._s(a.type)+" "+e._s(a.name)+" "),+a.total?n("span",[e._v(" "+e._s(a.complete)+"/"+e._s(a.total)+" ")]):e._e()]),n(f,{attrs:{color:"#cc7b19",indeterminate:!a.preactive&&+a.total==0,value:e.computeValue(a),bottom:""}})],1)])})],2):n(l,{attrs:{id:"noTasksRunning"}},[e._v(" No librarian tasks running ")])],1)],1)],1)],1)},L=[],$=u(T,g,L,!1,null,"83903d71",null,null);const C=$.exports;const F={name:"AdminMenu",components:{AdminStatusList:C},data(){return{mdiBookAlert:b,mdiOpenInNew:h}},computed:{...A(I,["isUserAdmin"]),...S(i,{unseenFailedImports:t=>t.unseenFailedImports})},methods:{...c(i,["clearFailedImports","librarianTask"])}};var y=function(){var e=this,n=e._self._c;return e.isUserAdmin?n("div",[n(_),n("h3",{attrs:{id:"adminMenuTitle"}},[e._v("Admin Tools")]),n(d,[n(s,{attrs:{ripple:""},on:{click:function(a){return e.librarianTask("poll")}}},[n(r,[n(l,[e._v("Poll All Libraries")])],1)],1),n(s,{attrs:{to:{name:"admin"},ripple:""},on:{click:function(a){e.unseenFailedImports=!1}}},[n(r,[n(l,[e._v(" Admin Panel "),e.unseenFailedImports?n(m,{attrs:{id:"failedImportsIcon",title:"New Failed Imports"}},[e._v(" "+e._s(e.mdiBookAlert)+" ")]):e._e()],1)],1)],1)],1),n("AdminStatusList")],1):e._e()},x=[],w=u(F,y,x,!1,null,"5617949e",null,null);const B=w.exports;export{B as default};
