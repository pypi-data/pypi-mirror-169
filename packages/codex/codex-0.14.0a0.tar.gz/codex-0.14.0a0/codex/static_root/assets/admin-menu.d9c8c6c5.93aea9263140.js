import{aU as p,e as m,q as c,g as r,h as l,a as _,F as v,_ as i,am as f,j as o,aV as b,m as k,W as h,aW as g}from"./datetime.2af18aca.js";import{h as A,j as s,l as d,n as u,o as C,p as I,i as S}from"./main.75c8435c.js";const T={name:"AdminStatusList",data(){return{mdiCloseCircleOutline:p}},computed:{...A(s,{librarianStatuses:n=>n.librarianStatuses,show:n=>n.librarianStatuses.length>0})},created(){this.load()},methods:{...d(s,["loadTable","librarianTask"]),computeValue:function(n){return n.preactive||+n.total==0?0:100*+n.complete/+n.total},load(){this.loadTable("LibrarianStatus")},clear(){this.librarianTask("librarian_clear_status","")}}};var L=function(){var e=this,a=e._self._c;return a(m,[e.show?a(c):e._e(),a(r,{attrs:{ripple:""},on:{click:e.load}},[a(l,[a(_,[e.show?a("div",[a(v,{attrs:{id:"clearButton",small:"",ripple:"",icon:"",title:"Clear Librarian Statuses"},on:{click:e.clear}},[a(i,[e._v(e._s(e.mdiCloseCircleOutline))])],1),a("h4",[e._v("Librarian Tasks")]),e._l(e.librarianStatuses,function(t){return a(_,{key:`${t.type} ${t.name}`},[a("div",{staticClass:"statusItem",attrs:{nav:""}},[a("div",{staticClass:"statusItemTitle"},[e._v(" "+e._s(t.type)+" "+e._s(t.name)+" "),+t.total?a("span",[e._v(" "+e._s(t.complete)+"/"+e._s(t.total)+" ")]):e._e()]),a(f,{attrs:{color:"#cc7b19",indeterminate:!t.preactive&&+t.total==0,value:e.computeValue(t),bottom:""}})],1)])})],2):a(o,{attrs:{id:"noTasksRunning"}},[e._v(" No librarian tasks running ")])],1)],1)],1)],1)},F=[],$=u(T,L,F,!1,null,"83903d71",null,null);const y=$.exports;const O={name:"AdminMenu",components:{AdminStatusList:y},data(){return{mdiBookAlert:b,mdiOpenInNew:k,mdiDatabaseClockOutline:h,mdiCogOutline:g}},computed:{...C(I,["isUserAdmin"]),...S(s,{unseenFailedImports:n=>n.unseenFailedImports})},methods:{...d(s,["clearFailedImports","librarianTask"])}};var x=function(){var e=this,a=e._self._c;return e.isUserAdmin?a("div",[a(c),a(m,[a(r,{attrs:{ripple:""},on:{click:function(t){return e.librarianTask("poll")}}},[a(l,[a(o,[a(i,[e._v(e._s(e.mdiDatabaseClockOutline))]),e._v("Poll All Libraries")],1)],1)],1),a(r,{attrs:{to:{name:"admin"},ripple:""},on:{click:function(t){e.unseenFailedImports=!1}}},[a(l,[a(o,[a(i,[e._v(e._s(e.mdiCogOutline))]),e._v("Admin Panel "),e.unseenFailedImports?a(i,{attrs:{id:"failedImportsIcon",title:"New Failed Imports"}},[e._v(" "+e._s(e.mdiBookAlert)+" ")]):e._e()],1)],1)],1)],1),a("AdminStatusList")],1):e._e()},V=[],w=u(O,x,V,!1,null,"dd731990",null,null);const N=w.exports;export{N as default};
