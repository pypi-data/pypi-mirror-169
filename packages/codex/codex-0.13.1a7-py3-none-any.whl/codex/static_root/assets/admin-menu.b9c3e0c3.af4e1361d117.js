import{aU as p,e as m,q as c,g as l,h as r,a as _,x as v,_ as i,am as f,j as o,aV as b,m as h,N as k,aW as g}from"./button.2d739dc7.js";import{h as A,j as s,l as d,n as u,o as C,p as I,i as S}from"./main.b94c07c8.js";const T={name:"AdminStatusList",data(){return{mdiCloseCircleOutline:p}},computed:{...A(s,{librarianStatuses:a=>a.librarianStatuses,show:a=>a.librarianStatuses.length>0})},created(){this.load()},methods:{...d(s,["loadTable","librarianTask"]),computeValue:function(a){return a.preactive||+a.total==0?0:100*+a.complete/+a.total},load(){this.loadTable("LibrarianStatus")},clear(){this.librarianTask("librarian_clear_status","")}}};var L=function(){var e=this,n=e._self._c;return n(m,[e.show?n(c):e._e(),n(l,{attrs:{ripple:""},on:{click:e.load}},[n(r,[n(_,[e.show?n("div",[n(v,{attrs:{id:"clearButton",small:"",ripple:"",icon:"",title:"Clear Librarian Statuses"},on:{click:e.clear}},[n(i,[e._v(e._s(e.mdiCloseCircleOutline))])],1),n("h4",[e._v("Librarian Tasks")]),e._l(e.librarianStatuses,function(t){return n(_,{key:`${t.type} ${t.name}`},[n("div",{staticClass:"statusItem",attrs:{nav:""}},[n("div",{staticClass:"statusItemTitle"},[e._v(" "+e._s(t.type)+" "+e._s(t.name)+" "),+t.total?n("span",[e._v(" "+e._s(t.complete)+"/"+e._s(t.total)+" ")]):e._e()]),n(f,{attrs:{color:"#cc7b19",indeterminate:!t.preactive&&+t.total==0,value:e.computeValue(t),bottom:""}})],1)])})],2):n(o,{attrs:{id:"noTasksRunning"}},[e._v(" No librarian tasks running ")])],1)],1)],1)],1)},$=[],F=u(T,L,$,!1,null,"83903d71",null,null);const x=F.exports;const y={name:"AdminMenu",components:{AdminStatusList:x},data(){return{mdiBookAlert:b,mdiOpenInNew:h,mdiDatabaseClockOutline:k,mdiCogOutline:g}},computed:{...C(I,["isUserAdmin"]),...S(s,{unseenFailedImports:a=>a.unseenFailedImports})},methods:{...d(s,["clearFailedImports","librarianTask"])}};var O=function(){var e=this,n=e._self._c;return e.isUserAdmin?n("div",[n(c),n("h3",{attrs:{id:"adminMenuTitle"}},[e._v("Admin Tools")]),n(m,[n(l,{attrs:{ripple:""},on:{click:function(t){return e.librarianTask("poll")}}},[n(r,[n(o,[n(i,[e._v(e._s(e.mdiDatabaseClockOutline))]),e._v("Poll All Libraries")],1)],1)],1),n(l,{attrs:{to:{name:"admin"},ripple:""},on:{click:function(t){e.unseenFailedImports=!1}}},[n(r,[n(o,[n(i,[e._v(e._s(e.mdiCogOutline))]),e._v("Admin Panel "),e.unseenFailedImports?n(i,{attrs:{id:"failedImportsIcon",title:"New Failed Imports"}},[e._v(" "+e._s(e.mdiBookAlert)+" ")]):e._e()],1)],1)],1)],1),n("AdminStatusList")],1):e._e()},V=[],w=u(y,O,V,!1,null,"c867fd4d",null,null);const B=w.exports;export{B as default};
